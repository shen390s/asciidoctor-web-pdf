<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}
</style>

<link href="./redhat/assets/style.css" rel="stylesheet">
</head>
<body>
<header>
  <h1>Quarkus Cheat-Sheet</h1>
  <img class="logo" src="./redhat/assets/quarkus.png"/>
</header>
<section class="content">
<div class="sect1">
<h2 id="_what_is_quarkus"><a class="anchor" href="#_what_is_quarkus"></a><a class="link" href="#_what_is_quarkus">What is Quarkus?</a></h2>
<div class="sectionbody">
<p class=""><a href="https://quarkus.io/">Quarkus</a> is a Kubernetes Native Java stack tailored for GraalVM &amp; OpenJDK HotSpot, crafted from the best of breed Java libraries and standards.
Also focused on developer experience, making things just work with little to no configuration and allowing to do live coding.</p>
<p class="">Cheat-sheet tested with <strong>Quarkus 0.26.1</strong>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a><a class="link" href="#_getting_started">Getting Started</a></h2>
<div class="sectionbody">
<p class="">Quarkus comes with a Maven archetype to scaffold a very simple starting project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn io.quarkus:quarkus-maven-plugin:0.26.1:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=getting-started \
    -DclassName="org.acme.quickstart.GreetingResource" \
    -Dpath="/hello"</code></pre>
</div>
</div>
<p class="">This creates a simple JAX-RS resource called <code>GreetingResource</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/hello")
public class GreetingResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "hello";
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gradle"><a class="anchor" href="#_gradle"></a><a class="link" href="#_gradle">Gradle</a></h2>
<div class="sectionbody">
<p class="">There is no way to scaffold a project in Gradle but you only need to do:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">plugins {
    id 'java'
    id 'io.quarkus' version '0.26.1'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation enforcedPlatform('io.quarkus:quarkus-bom:0.26.1')
    implementation 'io.quarkus:quarkus-resteasy'
}</code></pre>
</div>
</div>
<p class="">Or in Kotlin:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="kotlin" class="language-kotlin hljs">plugins {
    java
}
apply(plugin = "io.quarkus")

repositories {
    mavenCentral()
}

dependencies {
    implementation(enforcedPlatform("io.quarkus:quarkus-bom:0.26.1"))
    implementation("io.quarkus:quarkus-resteasy")
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extensions"><a class="anchor" href="#_extensions"></a><a class="link" href="#_extensions">Extensions</a></h2>
<div class="sectionbody">
<p class="">Quarkus comes with extensions to integrate with some libraries such as JSON-B, Camel or MicroProfile spec.
To list all available extensions just run:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:list-extensions</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can use <code>-DsearchPattern=panache</code> to filter out all extensions except the ones matching the expression.
</td>
</tr>
</table>
</div>
<p class="">And to register the extensions into build tool:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension -Dextensions=""</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>extensions</code> property supports CSV format to register more than one extension at once.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_lifecycle"><a class="anchor" href="#_application_lifecycle"></a><a class="link" href="#_application_lifecycle">Application Lifecycle</a></h2>
<div class="sectionbody">
<p class="">You can be notified when the application starts/stops by observing <code>StartupEvent</code> and <code>ShutdownEvent</code> events.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ApplicationLifecycle {
    void onStart(@Observes StartupEvent event) {}
    void onStop(@Observes ShutdownEvent event) {}
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_configuration_parameters"><a class="anchor" href="#_adding_configuration_parameters"></a><a class="link" href="#_adding_configuration_parameters">Adding Configuration Parameters</a></h2>
<div class="sectionbody">
<p class="">To add configuration to your application, Quarkus relies on <a href="https://github.com/eclipse/microprofile-config" target="_blank" rel="noopener">MicroProfile Config</a> spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "greetings.message")
String message;

@ConfigProperty(name = "greetings.message",
                defaultValue = "Hello")
String messageWithDefault;

@ConfigProperty(name = "greetings.message")
Optional&lt;String&gt; optionalMessage;</code></pre>
</div>
</div>
<p class="">Properties can be set as:</p>
<div class="ulist">
<ul>
<li>
<p>Environment variables (<code>GREETINGS_MESSAGE</code>).</p>
</li>
<li>
<p>System properties (<code>-Dgreetings.message</code>).</p>
</li>
<li>
<p>Resources <code>src/main/resources/application.properties</code>.</p>
</li>
<li>
<p>External config directory under the current working directory: <code>config/application.properties</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greetings.message = Hello World</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>Array</code>, <code>List</code> and <code>Set</code> are supported. The delimiter is comma (<code>,</code>) char and <code>\</code> is the escape char.
</td>
</tr>
</table>
</div>
<p class=""><strong>Configuration Profiles</strong></p>
<p class="">Quarkus allow you to have multiple configuration in the same file (<code>application.properties</code>).</p>
<p class="">The syntax for this is <code>%{profile}.config.key=value</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%dev.quarkus.http.port=8181</code></pre>
</div>
</div>
<p class="">HTTP port will be 9090, unless the 'dev' profile is active.</p>
<p class="">Default profiles are:</p>
<div class="ulist">
<ul>
<li>
<p><code>dev</code>: Activated when in development mode (<code>quarkus:dev</code>).</p>
</li>
<li>
<p><code>test</code>: Activated when running tests.</p>
</li>
<li>
<p><code>prod</code>: The default profile when not running in development or test mode</p>
</li>
</ul>
</div>
<p class="">You can create custom profile names by enabling the profile either setting <code>quarkus.profile</code> system property or <code>QUARKUS_PROFILE</code> environment variable.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%staging.quarkus.http.port=9999</code></pre>
</div>
</div>
<p class="">And enable it <code>quarkus.profile=staging</code>.</p>
<p class="">You can also set it in the build tool:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
&lt;version&gt;${surefire-plugin.version}&lt;/version&gt;
&lt;configuration&gt;
    &lt;systemPropertyVariables&gt;
        &lt;quarkus.test.profile&gt;foo&lt;/quarkus.test.profile&gt;
        &lt;buildDirectory&gt;${project.build.directory}
        &lt;/buildDirectory&gt;
    &lt;/systemPropertyVariables&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Same for <code>maven-failsafe-plugin</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">test {
    useJUnitPlatform()
    systemProperty "quarkus.test.profile", "foo"
}</code></pre>
</div>
</div>
<p class=""><strong>@ConfigProperties</strong></p>
<p class="">As an alternative to injecting multiple related configuration values, you can also use the <code>@io.quarkus.arc.config.ConfigProperties</code> annotation to group properties.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting")
public class GreetingConfiguration {
    private String message;
    // getter/setter
}</code></pre>
</div>
</div>
<p class="">This class maps <code>greeting.message</code> property defined in <code>application.properties</code>.</p>
<p class="">You can inject this class by using CDI <code>@Inject GreetingConfiguration greeting;</code>.</p>
<p class="">Also you can use an interface approach:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting")
public interface GreetingConfiguration {

    @ConfigProperty(name = "message")
    String message();
    String getSuffix();</code></pre>
</div>
</div>
<p class="">If property does not follow getter/setter naming convention you need to use <code>org.eclipse.microprofile.config.inject.ConfigProperty</code> to set it.</p>
<p class="">Nested objects are also supporte:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting")
public class GreetingConfiguration {
    public String message;
    public HiddenConfig hidden;

    public static class HiddenConfig {
        public List&lt;String&gt; recipients;
    }
}</code></pre>
</div>
</div>
<p class="">And an <code>application.properties</code> mapping previous class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greeting.message = hello
greeting.hidden.recipients=Jane,John</code></pre>
</div>
</div>
<p class="">Bean Validation is also supported so properties are validated at startup time, for example <code>@Size(min = 20) public String message;</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>prefix</code> attribute is not mandatory. If not provided, attribute is determined by class name (ie <code>GreeetingConfiguration</code> is translated to <code>greeting</code> or <code>GreetingExtraConfiguration</code> to <code>greeting-extra</code>). The suffix of the class is always removed.
</td>
</tr>
</table>
</div>
<p class=""><strong>Custom Loader</strong></p>
<p class="">You can implement your own <code>ConfigSource</code> to load configuration from different places than the default ones provided by Quarkus.
For example, database, custom XML, REST Endpoints, &#8230;&#8203;</p>
<p class="">You need to create a new class and implement <code>ConfigSource</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.acme.config;
public class InMemoryConfig implements ConfigSource {

    private Map&lt;String, String&gt; prop = new HashMap&lt;&gt;();

    public InMemoryConfig() {
        // Init properties
    }

    @Override
    public int getOrdinal() {
        // The highest ordinal takes precedence
        return 900;
    }

    @Override
    public Map&lt;String, String&gt; getProperties() {
        return prop;
    }

    @Override
    public String getValue(String propertyName) {
        return prop.get(propertyName);
    }

    @Override
    public String getName() {
        return "MemoryConfigSource";
    }
}</code></pre>
</div>
</div>
<p class="">Then you need to register the <code>ConfigSource</code> as Java service.
Create a file with the following content:</p>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.ConfigSource</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.InMemoryConfig</code></pre>
</div>
</div>
<p class=""><strong>Custom Converters</strong></p>
<p class="">You can implement your own conversion types from String.
Implement <code>org.eclipse.microprofile.config.spi.Converter</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Priority(DEFAULT_QUARKUS_CONVERTER_PRIORITY + 100)
public class CustomInstantConverter
    implements Converter&lt;Instant&gt; {

    @Override
    public Instant convert(String value) {
        if ("now".equals(value.trim())) {
            return Instant.now();
        }
        return Instant.parse(value);
    }
}</code></pre>
</div>
</div>
<p class=""><code>@Priority</code> annotation is used to override the default <code>InstantConverter</code>.</p>
<p class="">Then you need to register the <code>Converter</code> as Java service.
Create a file with the following content:</p>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.Converter</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.CustomInstantConverter</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_context_path"><a class="anchor" href="#_custom_context_path"></a><a class="link" href="#_custom_context_path">Custom Context Path</a></h2>
<div class="sectionbody">
<p class="">By default Undertow will serve content from under the root context.
If you want to change this you can use the <code>quarkus.servlet.context-path</code> config key to set the context path.</p>
</div>
</div>
<div class="sect1">
<h2 id="_injection"><a class="anchor" href="#_injection"></a><a class="link" href="#_injection">Injection</a></h2>
<div class="sectionbody">
<p class="">Quarkus is based on CDI 2.0 to implement injection of code.
It is not fully supported and only a subset of the <a href="https://quarkus.io/guides/cdi-reference" target="_blank" rel="noopener">specification is implemented</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class GreetingService {

    public String message(String message) {
        return message.toUpperCase();
    }
}</code></pre>
</div>
</div>
<p class="">Scope annotation is mandatory to make the bean discoverable.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
GreetingService greetingService;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
Quarkus is designed with Substrate VM in mind. For this reason, we encourage you to use <em>package-private</em> scope instead of <em>private</em>.
</td>
</tr>
</table>
</div>
<p class=""><strong>Produces</strong></p>
<p class="">You can also create a factory of an object by using <code>@javax.enterprise.inject.Produces</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@ApplicationScoped
Message message() {
    Message m = new Message();
    m.setMsn("Hello");
    return m;
}

@Inject
Message msg;</code></pre>
</div>
</div>
<p class=""><strong>Qualifiers</strong></p>
<p class="">You can use qualifiers to return different implementations of the same interface or to customize the configuration of the bean.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Quote {
    @Nonbinding String value();
}

@Produces
@Quote("")
Message message(InjectionPoint msg) {
    Message m = new Message();
    m.setMsn(
        msg.getAnnotated()
        .getAnnotation(Quote.class)
        .value()
    );

    return m;
}

@Inject
@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Quarkus breaks the CDI spec by allowing you to inject qualified beans without using <code>@Inject</code> annotation.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_json_marshallingunmarshalling"><a class="anchor" href="#_json_marshallingunmarshalling"></a><a class="link" href="#_json_marshallingunmarshalling">JSON Marshalling/Unmarshalling</a></h2>
<div class="sectionbody">
<p class="">To work with <code>JSON-B</code> you need to add a dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-resteasy-jsonb"</code></pre>
</div>
</div>
<p class="">Any POJO is marshaled/unmarshalled automatically.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sauce {
    private String name;
    private long scovilleHeatUnits;

    // getter/setters
}</code></pre>
</div>
</div>
<p class="">JSON equivalent:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
	"name":"Blair's Ultra Death",
	"scovilleHeatUnits": 1100000
}</code></pre>
</div>
</div>
<p class="">In a <code>POST</code> endpoint example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response create(Sauce sauce) {
    // Create Sauce
    return Response.created(URI.create(sauce.getId()))
            .build();
}</code></pre>
</div>
</div>
<p class="">To work with <code>Jackson</code> you need to add:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jackson"</code></pre>
</div>
</div>
<p class="">If you don&#8217;t want to use the default <code>ObjectMapper</code> you can customize it by:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CustomObjectMapperConfig {
    @Singleton
    @Produces
    public ObjectMapper objectMapper() {
        ObjectMapper objectMapper = new ObjectMapper();
        // perform configuration
        return objectMapper;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_xml_marshallingunmarshalling"><a class="anchor" href="#_xml_marshallingunmarshalling"></a><a class="link" href="#_xml_marshallingunmarshalling">XML Marshalling/Unmarshalling</a></h2>
<div class="sectionbody">
<p class="">To work with <code>JAX-B</code> you need to add a dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jaxb"</code></pre>
</div>
</div>
<p class="">Then annotated POJOs are converted to XML.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@XmlRootElement
public class Message {
}

 @GET
@Produces(MediaType.APPLICATION_XML)
public Message hello() {
    return message;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validator"><a class="anchor" href="#_validator"></a><a class="link" href="#_validator">Validator</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses <a href="https://hibernate.org/validator/" target="_blank" rel="noopener">Hibernate Validator</a> to validate input/output of REST services and business services using Bean validation spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-hibernate-validator"</code></pre>
</div>
</div>
<p class="">Annotate POJO objects with validator annotations such as: <code>@NotNull</code>, <code>@Digits</code>, <code>@NotBlank</code>, <code>@Min</code>, <code>@Max</code>, &#8230;&#8203;</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sauce {

    @NotBlank(message = "Name may not be blank")
    private String name;
    @Min(0)
    private long scovilleHeatUnits;

    // getter/setters
}</code></pre>
</div>
</div>
<p class="">To validate an object use <code>@Valid</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public Response create(@Valid Sauce sauce) {}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If a validation error is triggered, a violation report is generated and serialized as JSON. If you want to manipulate the output, you need to catch in the code the <code>ConstraintViolationException</code> exception.
</td>
</tr>
</table>
</div>
<p class=""><strong>Create Your Custom Constraints</strong></p>
<p class="">First you need to create the custom annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR,
            PARAMETER, TYPE_USE })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = { NotExpiredValidator.class})
public @interface NotExpired {

    String message() default "Sauce must not be expired";
    Class&lt;?&gt;[] groups() default { };
    Class&lt;? extends Payload&gt;[] payload() default { };

}</code></pre>
</div>
</div>
<p class="">You need to implement the validator logic in a class that implements <code>ConstraintValidator</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class NotExpiredValidator
    implements ConstraintValidator&lt;NotExpired, LocalDate&gt;
    {

    @Override
    public boolean isValid(LocalDate value,
                        ConstraintValidatorContext ctx) {
        if ( value == null ) return true;
        LocalDate today = LocalDate.now();
        return ChronoUnit.YEARS.between(today, value) &gt; 0;
    }
}</code></pre>
</div>
</div>
<p class="">And use it normally:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@NotExpired
@JsonbDateFormat(value = "yyyy-MM-dd")
private LocalDate expired;</code></pre>
</div>
</div>
<p class=""><strong>Manual Validation</strong></p>
<p class="">You can call the validation process manually instead of relaying to <code>@Valid</code> by injecting <code>Validator</code> class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Validator validator;</code></pre>
</div>
</div>
<p class="">And use it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Set&lt;ConstraintViolation&lt;Sauce&gt;&gt; violations =
            validator.validate(sauce);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging"><a class="anchor" href="#_logging"></a><a class="link" href="#_logging">Logging</a></h2>
<div class="sectionbody">
<p class="">You can configure how Quarkus logs:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.console.enable=true
quarkus.log.console.level=DEBUG
quarkus.log.console.color=false
quarkus.log.category."com.lordofthejars".level=DEBUG</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.log</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>category."&lt;category-name&gt;".level</code></dt>
<dd>
<p>Minimum level category (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>level</code></dt>
<dd>
<p>Default minimum level (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>console.enabled</code></dt>
<dd>
<p>Console logging enabled (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>console.format</code></dt>
<dd>
<p>Format pattern to use for logging. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>console.level</code></dt>
<dd>
<p>Minimum log level (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>console.color</code></dt>
<dd>
<p>Allow color rendering (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>file.enable</code></dt>
<dd>
<p>File logging enabled (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.format</code></dt>
<dd>
<p>Format pattern to use for logging. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %h %N[%i] %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>file.level</code></dt>
<dd>
<p>Minimum log level (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>file.path</code></dt>
<dd>
<p>The path to log file (default: <code>quarkus.log</code>)</p>
</dd>
<dt class="hdlist1"><code>file.rotation.max-file-size</code></dt>
<dd>
<p>The maximum file size of the log file</p>
</dd>
<dt class="hdlist1"><code>file.rotation.max-backup-index</code></dt>
<dd>
<p>The maximum number of backups to keep (default: <code>1</code>)</p>
</dd>
<dt class="hdlist1"><code>file.rotation.file-suffix</code></dt>
<dd>
<p>Rotating log file suffix.</p>
</dd>
<dt class="hdlist1"><code>file.rotation.rotate-on-boot</code></dt>
<dd>
<p>Indicates rotate logs at bootup (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async</code></dt>
<dd>
<p>Log asynchronously (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async.queue-length</code></dt>
<dd>
<p>The queue length to use before flushing writing (default: <code>512</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async.overflow</code></dt>
<dd>
<p>Action when queue is full (default: <code>BLOCK</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.enable</code></dt>
<dd>
<p>syslog logging is enabled (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.format</code></dt>
<dd>
<p>The format pattern to use for logging to syslog. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %h %N[%i] %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>syslog.level</code></dt>
<dd>
<p>The minimum log level to write to syslog (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.endpoint</code></dt>
<dd>
<p>The IP address and port of the syslog server (default: <code>localhost:514</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.app-name</code></dt>
<dd>
<p>The app name used when formatting the message in RFC5424 format (default: current process name)</p>
</dd>
<dt class="hdlist1"><code>syslog.hostname</code></dt>
<dd>
<p>The name of the host the messages are being sent from (default: current hostname)</p>
</dd>
<dt class="hdlist1"><code>syslog.facility</code></dt>
<dd>
<p>Priority of the message as defined by RFC-5424 and RFC-3164 (default: <code>USER_LEVEL</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.syslog-type</code></dt>
<dd>
<p>The syslog type of format message (default: <code>RFC5424</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.protocol</code></dt>
<dd>
<p>Protocol used (default: <code>TCP</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.use-counting-framing</code></dt>
<dd>
<p>Message prefixed with the size of the message (default <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.truncate</code></dt>
<dd>
<p>Message should be truncated (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.block-on-reconnect</code></dt>
<dd>
<p>Block when attempting to reconnect (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async</code></dt>
<dd>
<p>Log asynchronously (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async.queue-length</code></dt>
<dd>
<p>The queue length to use before flushing writing (default: <code>512</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async.overflow</code></dt>
<dd>
<p>Action when queue is full (default: <code>BLOCK</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_client"><a class="anchor" href="#_rest_client"></a><a class="link" href="#_rest_client">Rest Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus implements <a href="https://github.com/eclipse/microprofile-rest-client" target="_blank" rel="noopener">MicroProfile Rest Client</a> spec:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-rest-client"</code></pre>
</div>
</div>
<p class="">To get content from <a href="http://worldclockapi.com/api/json/cet/now" class="bare">http://worldclockapi.com/api/json/cet/now</a> you need to create a service interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {

    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    WorldClock getNow();

    @GET
    @Path("/json/{where}/now")
    @Produces(MediaType.APPLICATION_JSON)
    WorldClock getSauce(@BeanParam
                    WorldClockOptions worldClockOptions);

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class WorldClockOptions {
    @HeaderParam("Authorization")
    String auth;

    @PathParam("where")
    String where;
}</code></pre>
</div>
</div>
<p class="">And configure the hostname at <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/url=
        http://worldclockapi.com</code></pre>
</div>
</div>
<p class="">Injecting the client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestClient
WorldClockService worldClockService;</code></pre>
</div>
</div>
<p class="">If invokation happens within JAX-RS, you can propagate headers from incoming to outgoing by using next property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.eclipse.microprofile.rest.client.propagateHeaders=
            Authorization,MyCustomHeader</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can still use the JAX-RS client without any problem <code>ClientBuilder.newClient().target(&#8230;&#8203;)</code>
</td>
</tr>
</table>
</div>
<p class=""><strong>Adding headers</strong></p>
<p class="">You can customize the headers passed by implementing MicroProfile <code>ClientHeadersFactory</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RegisterForReflection
public class BaggageHeadersFactory
                implements ClientHeadersFactory {
    @Override
    public MultivaluedMap&lt;String, String&gt; update(
        MultivaluedMap&lt;String, String&gt; incomingHeaders,
        MultivaluedMap&lt;String, String&gt; outgoingHeaders) {}
}</code></pre>
</div>
</div>
<p class="">And registering it in the client using <code>RegisterClientHeaders</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RegisterClientHeaders(BaggageHeadersFactory.class)
@RegisterRestClient
public interface WorldClockService {}</code></pre>
</div>
</div>
<p class="">Or statically set:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@ClientHeaderParam(name="X-Log-Level", value="ERROR")
Response getNow();</code></pre>
</div>
</div>
<p class=""><strong>Asynchronous</strong></p>
<p class="">A method on client interface can return a <code>CompletionStage</code> class to be executed asynchronously.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET @Path("/json/cet/now")
@Produces(MediaType.APPLICATION_JSON)
CompletionStage&lt;WorldClock&gt; getNow();</code></pre>
</div>
</div>
<p class=""><strong>Multipart</strong></p>
<p class="">It is really easy to send multipart form-data with Rest Client.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
    &lt;artifactId&gt;resteasy-multipart-provider&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">The model object:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import java.io.InputStream;

import javax.ws.rs.FormParam;
import javax.ws.rs.core.MediaType;

import
    org.jboss.resteasy.annotations.providers.multipart.PartType;

public class MultipartBody {

    @FormParam("file")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    private InputStream file;

    @FormParam("fileName")
    @PartType(MediaType.TEXT_PLAIN)
    private String name;

    // getter/setters
}</code></pre>
</div>
</div>
<p class="">And the Rest client interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import
    org.jboss.resteasy.annotations.providers.multipart.MultipartForm;

@Path("/echo")
@RegisterRestClient
public interface MultipartService {

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces(MediaType.TEXT_PLAIN)
    String sendMultipartData(@MultipartForm
                        MultipartBody data);

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a><a class="link" href="#_testing">Testing</a></h2>
<div class="sectionbody">
<p class="">Quarkus archetype adds test dependencies with JUnit 5 and Rest-Assured library to test REST endpoints.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/hello")
          .then()
             .statusCode(200)
             .body(is("hello"));
    }
}</code></pre>
</div>
</div>
<p class="">Test port can be set in <code>quarkus.http.test-port</code> property.</p>
<p class="">You can also inject the URL where Quarkus is started:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TestHTTPResource("index.html")
URL url;</code></pre>
</div>
</div>
<p class=""><strong>Quarkus Test Resource</strong></p>
<p class="">You can execute some logic before the first test run (<code>start</code>) and execute some logic at the end of the test suite (<code>stop</code>).</p>
<p class="">You need to create a class implementing <code>QuarkusTestResourceLifecycleManager</code> interface and register it in the test via <code>@QuarkusTestResource</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyCustomTestResource
    implements QuarkusTestResourceLifecycleManager {

    @Override
    public Map&lt;String, String&gt; start() {
        // return system properties that
        // should be set for the running test
        return Collections.emptyMap();
    }

    @Override
    public void stop() {
    }

    // optional
    @Override
    public void inject(Object testInstance) {
    }

    // optional
    @Override
    public int order() {
        return 0;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
Returning new system properties implies running parallel tests in different JVMs.
</td>
</tr>
</table>
</div>
<p class="">And the usage:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(MyCustomTestResource.class)
public class MyTest {
}</code></pre>
</div>
</div>
<p class=""><strong>Mocking</strong></p>
<p class="">If you need to provide an alternative implementation of a service (for testing purposes) you can do it by using CDI <code>@Alternative</code> annotation using it in the test service placed at <code>src/test/java</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Alternative
@Priority(1)
@ApplicationScoped
public class MockExternalService extends ExternalService {}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
This does not work when using native image testing.
</td>
</tr>
</table>
</div>
<p class="">A stereotype annotation <code>io.quarkus.test.Mock</code> is provided declaring <code>@Alternative</code>, <code>@Priority(1)</code> and <code>@Dependent</code>.</p>
<p class=""><strong>Interceptors</strong></p>
<p class="">Tests are actually full CDI beans, so you can apply CDI interceptors:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
@Stereotype
@Transactional
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface TransactionalQuarkusTest {
}

@TransactionalQuarkusTest
public class TestStereotypeTestCase {}</code></pre>
</div>
</div>
<p class=""><strong>Test Coverage</strong>
Due the nature of Quarkus to calculate correctly the coverage information with JaCoCo, you might need offline instrumentation.
I recommend reading <a href="https://quarkus.io/guides/tests-with-coverage-guide" target="_blank" rel="noopener">this document</a> to understand how JaCoCo and Quarkus works and how you can configure JaCoCo to get correct data.</p>
<p class=""><strong>Native Testing</strong></p>
<p class="">To test native executables annotate the test with <code>@SubstrateTest</code>.</p>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_persistence"><a class="anchor" href="#_persistence"></a><a class="link" href="#_persistence">Persistence</a></h2>
<div class="sectionbody">
<p class="">Quarkus works with JPA(Hibernate) as persistence solution.
But also provides an <a href="https://en.wikipedia.org/wiki/Active_record_pattern" target="_blank" rel="noopener">Active Record pattern</a> implementation under Panache project.</p>
<p class="">To use database access you need to add Quarkus JDBC drivers instead of the original ones.
At this time <code>Apache Derby</code>, <code>H2</code>, <code>MariaDB</code>, <code>MySQL</code>, <code>MSSQL</code> and <code>PostgreSQL</code> drivers are supported.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-hibernate-orm-panache,
                io.quarkus:quarkus-jdbc-mariadb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class Developer extends PanacheEntity {

    // id field is implicit

    public String name;
}</code></pre>
</div>
</div>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=jdbc:mariadb://localhost:3306/mydb
quarkus.datasource.driver=org.mariadb.jdbc.Driver
quarkus.datasource.username=developer
quarkus.datasource.password=developer
quarkus.hibernate-orm.database.generation=update</code></pre>
</div>
</div>
<p class="">List of datasource parameters.</p>
<p class=""><code>quarkus.datasource</code> as prefix is skipped in the next table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>driver</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>url</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>min-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Integer</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Integer</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>initial-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Integer</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>background-validation-interval</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.time.Duration</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>acquisition-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.time.Duration</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>leak-detection-interval</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.time.Duration</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>idle-removal-interval</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.time.Duration</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>transaction-isolation-level</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>io.quarkus.agroal.runtime</code>
<code>.TransactionIsolationLevel</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>enable-metrics</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Boolean</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>xa</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Boolean</code></p></div></td>
</tr>
</tbody>
</table>
<p class="">Hibernate configuration properties.
Prefix <code>quarkus.hibernate-orm</code> is skipped.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Values[Default]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>dialect</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class name of the Hibernate ORM dialect.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Not necessary to set.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>dialect.storage-engine</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The storage engine when the dialect supports multiple storage engines.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Not necessary to set.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>sql-load-script</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the file containing the SQL statements to execute when starts.
<code>no-file</code> force Hibernate to skip SQL import.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>import.sql</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>batch-fetch-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the batches.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">-1 disabled.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>query.query-plan-cache-max-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum size of the query plan cache.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>query.default-null-ordering</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Default precedence of null values in <code>ORDER BY</code>.</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>none</code>], <code>first</code>, <code>last</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>database.generation</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database schema is generation.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>none</code>], <code>create</code>, <code>drop-and-create</code>, <code>drop</code>, <code>update</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>database.generation.halt-on-error</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop on the first error when applying the schema.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>flase</code>], <code>true</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>database.default-catalog</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default catalog.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>database.default-schema</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Schema.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>database.charset</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Charset.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>jdbc.timezone</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time Zone JDBC driver.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>jdbc.statement-fetch-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows fetched at a time.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>jdbc.statement-batch-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of updates sent at a time.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>log.sql</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show SQL logs</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>false</code>], <code>true</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>log.jdbc-warnings</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect and show JDBC warnings.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>false</code>], <code>true</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>statistics</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable statiscs collection.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>false</code>], <code>true</code></p></div></td>
</tr>
</tbody>
</table>
<p class="">Database operations:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// Insert
Developer developer = new Developer();
developer.name = "Alex";
developer.persist();

// Find All
Developer.findAll().list();

// Find By Query
Developer.find("name", "Alex").firstResult();

// Delete
Developer developer = new Developer();
developer.id = 1;
developer.delete();

// Delete By Query
long numberOfDeleted = Developer.delete("name", "Alex");</code></pre>
</div>
</div>
<p class="">Remember to annotate methods with <code>@Transactional</code> annotation to make changes persisted in the database.</p>
<p class="">If queries start with the keyword <code>from</code> then they are treated as <em>HQL</em> query, if not then next short form is supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>order by</code> which expands to <code>from EntityName order by &#8230;&#8203;</code></p>
</li>
<li>
<p><code>&lt;columnName&gt;</code> which expands to <code>from EntityName where &lt;columnName&gt;=?</code></p>
</li>
<li>
<p><code>&lt;query&gt;</code> which is expanded to <code>from EntityName where &lt;query&gt;</code></p>
</li>
</ul>
</div>
<p class=""><strong>Static Methods</strong></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Parameters</th>
<th class="tableblock halign-left valign-top">Return</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>findById</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Object</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Returns object or null if not found.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>find</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Lists of entities meeting given query with parameters set.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>find</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code>, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Lists of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>findAll</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Finds all entities.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>findAll</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Sort</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Finds all entities sorted by <code>Sort</code> attribute/s.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>stream</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.util.stream.Stream</code> of entities meeting given query with parameters set.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>stream</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code>, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.util.stream.Stream</code> of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>streamAll</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.util.stream.Stream</code> of all entities.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>streamAll</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Sort</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>java.util.stream.Stream</code> of all entities sorted by <code>Sort</code> attribute/s.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>count</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">`Number of entities.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>count</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Number of entities meeting given query with parameters set.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>deleteAll</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Number of deleted entities.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>delete</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Number of deleted entities meeting given query with parameters set.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>persist</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">[<code>Iterable</code>, <code>Steram</code>, <code>Object&#8230;&#8203;</code>]</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<p class=""><strong>Pagination</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons = Person
            .find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<p class="">If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<p class=""><strong>DAO pattern</strong></p>
<p class="">Also supports <em>DAO</em> pattern with <code>PanacheRepository&lt;TYPE&gt;</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DeveloperRepository
    implements PanacheRepository&lt;Person&gt; {
   public Person findByName(String name){
     return find("name", name).firstResult();
   }
}</code></pre>
</div>
</div>
<p class=""><strong>EntityManager</strong>
You can inject <code>EntityManager</code> in your classes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
EntityManager em;

em.persist(car);</code></pre>
</div>
</div>
<div class="page-break"></div>
<p class=""><strong>Multiple datasources</strong></p>
<p class="">You can register more than one datasource.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># default
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:default
....
# users datasource
quarkus.datasource.users.driver=org.h2.Driver
quarkus.datasource.users.url=jdbc:h2:tcp://localhost/mem:users</code></pre>
</div>
</div>
<p class="">Notice that after <code>datasource</code> you set the datasource name, in previous case <code>users</code>.</p>
<p class="">You can inject then <code>AgroalDataSource</code> with <code>io.quarkus.agroal.DataSource</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@DataSource("users")
AgroalDataSource dataSource1;</code></pre>
</div>
</div>
<p class=""><strong>Flushing</strong></p>
<p class="">You can force flush operation by calling <code>.flush()</code> or <code>.persistAndFlush()</code> to make it in a single call.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
This flush is less efficient and you still need to commit transaction.
</td>
</tr>
</table>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">There is a Quarkus Test Resource that starts and stops H2 server before and after test suite.</p>
<p class="">Register dependency <code>io.quarkus:quarkus-test-h2:test</code>.</p>
<p class="">And annotate the test:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(H2DatabaseTestResource.class)
public class FlywayTestResources {
}</code></pre>
</div>
</div>
<p class=""><strong>Transactions</strong></p>
<p class="">The easiest way to define your transaction boundaries is to use the <code>@Transactional</code> annotation.</p>
<p class="">Transactions are mandatory in case of none idempotent operations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
public void createDeveloper() {}</code></pre>
</div>
</div>
<p class="">You can control the transaction scope:</p>
<div class="ulist">
<ul>
<li>
<p><code>@Transactional(REQUIRED)</code> (default): starts a transaction if none was started, stays with the existing one otherwise.</p>
</li>
<li>
<p><code>@Transactional(REQUIRES_NEW)</code>: starts a transaction if none was started; if an existing one was started, suspends it and starts a new one for the boundary of that method.</p>
</li>
<li>
<p><code>@Transactional(MANDATORY)</code>: fails if no transaction was started ; works within the existing transaction otherwise.</p>
</li>
<li>
<p><code>@Transactional(SUPPORTS)</code>: if a transaction was started, joins it ; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NOT_SUPPORTED)</code>: if a transaction was started, suspends it and works with no transaction for the boundary of the method; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NEVER)</code>: if a transaction was started, raises an exception; otherwise works with no transaction.</p>
</li>
</ul>
</div>
<p class="">You can configure the default transaction timeout using <code>quarkus.transaction-manager.default-transaction-timeout</code> configuration property. By default it is set to 60 seconds.</p>
<p class="">You can set a timeout property, in seconds, that applies to transactions created within the annotated method by using <code>@TransactionConfiguration</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@TransactionConfiguration(timeout=40)
public void createDeveloper() {}</code></pre>
</div>
</div>
<p class="">If you want more control over transactions you can inject <code>UserTransaction</code> and use a programmatic way.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject UserTransaction transaction

transaction.begin();
transaction.commit();
transaction.rollback();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_infinispan"><a class="anchor" href="#_infinispan"></a><a class="link" href="#_infinispan">Infinispan</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://infinispan.org/" target="_blank" rel="noopener">Infinispan</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-client"</code></pre>
</div>
</div>
<p class="">Serialization uses a library called <a href="https://github.com/infinispan/protostream" target="_blank" rel="noopener">Protostream</a>.</p>
<p class=""><strong>Annotation based</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ProtoFactory
public Author(String name, String surname) {
    this.name = name;
    this.surname = surname;
}

@ProtoField(number = 1)
public String getName() {
    return name;
}

@ProtoField(number = 2)
public String getSurname() {
    return surname;
}</code></pre>
</div>
</div>
<p class="">Initializer to set configuration settings.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@AutoProtoSchemaBuilder(includeClasses =
    { Book.class, Author.class },
    schemaPackageName = "book_sample")
interface BookContextInitializer
        extends SerializationContextInitializer {
}</code></pre>
</div>
</div>
<p class=""><strong>User written based</strong></p>
<p class="">There are three ways to create your schema:</p>
<p class=""><em>Protofile</em></p>
<p class="">Creates a <code>.proto</code> file in the <code>META-INF</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="proto" class="language-proto hljs">package book_sample;

message Author {
  required string name = 1;
  required string surname = 2;
}</code></pre>
</div>
</div>
<p class="">In case of having a Collection field you need to use the <code>repeated</code> key (ie <code>repeated Author authors = 4</code>).</p>
<p class=""><em>In code</em></p>
<p class="">Setting <code>proto</code> schema directly in a produced bean.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
FileDescriptorSource bookProtoDefinition() {
    return FileDescriptorSource
        .fromString("library.proto",
                    "package book_sample;\n" +
                    "message Author {\n" +
                    "  required string name = 1;\n" +
                    "  required string surname = 2;\n" +
                    "}");
}</code></pre>
</div>
</div>
<p class=""><em>Marshaller</em></p>
<p class="">Using <code>org.infinispan.protostream.MessageMarshaller</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class AuthorMarshaller
    implements MessageMarshaller&lt;Author&gt; {

   @Override
   public String getTypeName() {
      return "book_sample.Author";
   }

   @Override
   public Class&lt;? extends Author&gt; getJavaClass() {
      return Author.class;
   }

   @Override
   public void writeTo(ProtoStreamWriter writer,
                    Author author) throws IOException {
      writer.writeString("name", author.getName());
      writer.writeString("surname", author.getSurname());
   }

   @Override
   public Author readFrom(ProtoStreamReader reader)
        throws IOException {
      String name = reader.readString("name");
      String surname = reader.readString("surname");
      return new Author(name, surname);
   }
}</code></pre>
</div>
</div>
<p class="">And producing the marshaller:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
MessageMarshaller authorMarshaller() {
    return new AuthorMarshaller();
}</code></pre>
</div>
</div>
<p class=""><strong>Infinispan Embedded</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-embeddedy"</code></pre>
</div>
</div>
<p class="">Configuration in <code>infinispan.xml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;local-cache name="quarkus-transaction"&gt;
   &lt;transaction
        transaction-manager-lookup=
        "org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup"/&gt;
&lt;/local-cache&gt;</code></pre>
</div>
</div>
<p class="">Set configuration file location in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.infinispan-embedded.xml-config=infinispan.xml</code></pre>
</div>
</div>
<p class="">And you can inject the main entry point for the cache:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.infinispan.manager.EmbeddedCacheManager cacheManager;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flyway"><a class="anchor" href="#_flyway"></a><a class="link" href="#_flyway">Flyway</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://flywaydb.org/" target="_blank" rel="noopener">Flyway</a> to help you on database schema migrations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-flyway"</code></pre>
</div>
</div>
<p class="">Then place migration files to the migrations folder (<code>classpath:db/migration</code>).</p>
<p class="">You can inject <code>org.flywaydb.core.Flyway</code> to programmatically execute the migration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Flyway flyway;

flyway.migrate();</code></pre>
</div>
</div>
<p class="">Or can be automatically executed by setting <code>migrate-at-start</code> property to <code>true</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.flyway.migrate-at-start=true</code></pre>
</div>
</div>
<p class="">List of Flyway parameters.</p>
<p class=""><code>quarkus.</code> as prefix is skipped in the next table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.migrate-at-start</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flyway migration automatically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.locations</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>classpath:db/migration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV locations to scan recursively for migrations. Supported prefixes <code>classpath</code> and <code>filesystem</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.connect-retries</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">0</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of retries when attempting to connect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.schemas</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">none</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV case-sensitive list of schemas managed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.table</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway_schema_history</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of Flyways schema history table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.sql-migration-prefix</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>V</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix for versioned SQL migrations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.repeatable-sql-migration-prefix</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>R</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix for repeatable SQL migrations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.baseline-on-migrate</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only migrations above <strong>baseline-version</strong> will then be applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.baseline-version</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Version to tag an existing schema with when executing baseline.</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>flyway.baseline-description</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Flyway Baseline</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description to tag an existing schema with when executing baseline</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_hibernate_search"><a class="anchor" href="#_hibernate_search"></a><a class="link" href="#_hibernate_search">Hibernate Search</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener">Elasticsearch</a> to provide a full-featured full-text search using <a href="https://hibernate.org/search/" target="_blank" rel="noopener">Hibernate Search</a> API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-hibernate-search-elasticsearch"</code></pre>
</div>
</div>
<p class="">You need to annotate your model with Hibernate Search API to index it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
@Indexed
public class Author extends PanacheEntity {

    @FullTextField(analyzer = "english")
    public String bio;

    @FullTextField(analyzer = "name")
    @KeywordField(name = "firstName_sort",
        sortable = Sortable.YES,
        normalizer = "sort")
    public String firstName;

    @OneToMany
    @IndexedEmbedded
    public List&lt;Book&gt; books;

}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
It is not mandatory to use Panache.
</td>
</tr>
</table>
</div>
<p class="">You need to define the analyzers and normalizers defined in annotations.
You only need to implement <code>ElasticsearchAnalysisConfigurer</code> interface and configure it.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyQuarkusAnalysisConfigurer
            implements ElasticsearchAnalysisConfigurer {

    @Override
    public void configure(
        ElasticsearchAnalysisDefinitionContainerContext ctx)
    {
            ctx.analyzer("english").custom()
                .withTokenizer("standard")
                .withTokenFilters("asciifolding",
                    "lowercase", "porter_stem");

        ctx.normalizer("sort").custom()
            .withTokenFilters("asciifolding", "lowercase");
    }
}</code></pre>
</div>
</div>
<p class="">Use Hibernate Search in REST service:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class LibraryResource {

    @Inject
    EntityManager em;

    @Transactional
    public List&lt;Author&gt; searchAuthors(
        @QueryParam("pattern") String pattern) {
        return Search.getSearchSession(em)
            .search(Author.class)
            .predicate(f -&gt;
                pattern == null || pattern.isEmpty() ?
                    f.matchAll() :
                    f.simpleQueryString()
                        .onFields("firstName",
                            "lastName", "books.title")
                        .matching(pattern)
                )
            .sort(f -&gt; f.byField("lastName_sort")
            .then().byField("firstName_sort"))
            .fetchHits();
    }</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
When not using Hibernate ORM, index data using <code>Search.getSearchSession(em).createIndexer()</code> <code>.startAndWait()</code> at startup time.
</td>
</tr>
</table>
</div>
<p class="">Configure the extension in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.hibernate-search.elasticsearch.version=7
quarkus.hibernate-search.elasticsearch.
    analysis-configurer=MyQuarkusAnalysisConfigurer
quarkus.hibernate-search.elasticsearch.
    automatic-indexing.synchronization-strategy=searchable
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.strategy=drop-and-create
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.required-status=yellow</code></pre>
</div>
</div>
<p class="">List of Hibernate-Elasticsearch properties prefixed with <code>quarkus.hibernate-search.elasticsearch</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>backends</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map of configuration of additional backends.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>version</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Elasticsearch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>analysis-configurer</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class or name of the neab used to configure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Elasticsearch servers hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>username</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for auth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>password</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for auth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration of connection timeout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connections</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of connections to servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connections-per-route</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of connections to server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>indexes</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Per-index specific configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>discovery.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables automatic discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>discovery.refresh-interval</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refresh interval of node list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>discovery.default-scheme</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheme to be used for the new nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>automatic-indexing.synchronization-strategy</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Status for which you wait before considering the operation completed (<code>queued</code>,<code>committed</code> or <code>searchable</code>).</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>automatic-indexing.enable-dirty-check</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, re-indexing of is skipped if the changes are on properties that are not used when indexing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>index-defaults.lifecycle.strategy</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Index lifecycle (<code>none</code>, <code>validate</code>, <code>update</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop-abd-create-drop</code>)</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>index-defaults.lifecycle.required-status</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Minimal cluster status (<code>green</code>, <code>yellow</code>, <code>red</code>)</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>index-defaults.lifecycle.required-status-wait-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting time before failing the bootstrap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>index-defaults.refresh-after-write</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set if index should be refreshed after writes.</p></td>
</tr>
</tbody>
</table>
<p class="">Possible annotations:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Indexed</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register entity as full text index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@FullTextField</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full text search. Need to set an analyzer to split tokens.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@KeywordField</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string is kept as one single token but can be normalized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>IndexedEmbedded</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include the Book fields into the Author index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@ContainerExtraction</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Sets how to extract a value from container, e.g from a <code>Map</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@DocumentId</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map an unusual entity identifier to a document identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@GenericField</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full text index for any supported type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@IdentifierBridgeRef</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Reference to the identifier bridge to use for a <code>@DocumentId</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@IndexingDependency</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How a dependency of the indexing process to a property should affect automatic reindexing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@ObjectPath</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@ScaledNumberField</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">For <code>java.math.BigDecimal</code> or <code>java.math.BigInteger</code> that you need higher precision.</p></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_dynamodb"><a class="anchor" href="#_amazon_dynamodb"></a><a class="link" href="#_amazon_dynamodb">Amazon DynamoDB</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener">Amazon DynamoDB</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-dynamodb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
DynamoDbClient dynamoDB;

@Inject
DynamoDbAsyncClient dynamoDB;</code></pre>
</div>
</div>
<p class="">To use it as a local DynamoDB instance:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.dynamodb.region=
    eu-central-1
quarkus.dynamodb.endpoint-override=
    http://localhost:8000
quarkus.dynamodb.credentials.type=STATIC
quarkus.dynamodb.credentials.static-provider
    .access-key-id=test-key
quarkus.dynamodb.credentials.static-provider
.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">If you want to work with an AWS account, youd need to set it with:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">quarkus.dynamodb.region=&lt;YOUR_REGION&gt;
quarkus.dynamodb.credentials.type=DEFAULT</code></pre>
</div>
</div>
<p class=""><code>DEFAULT</code> credentials provider chain:</p>
<div class="ulist">
<ul>
<li>
<p>System properties <code>aws.accessKeyId</code>, <code>aws.secretKey</code></p>
</li>
<li>
<p>Env. Varables <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
<li>
<p>Credentials profile <code>~/.aws/credentials</code></p>
</li>
<li>
<p>Credentials through the Amazon EC2 container service if the <code>AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</code> set</p>
</li>
<li>
<p>Credentials through Amazon EC2 metadata service.</p>
</li>
</ul>
</div>
<p class="">Configuration parameters prefixed with <code>quarkus.dynamodb</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>enable-endpoint-discovery</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Endpoint discovery for a service API that supports endpoint discovery.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>endpoint-override</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Configure the endpoint with which the SDK should communicate.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>api-call-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Time to complete an execution.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>interceptors</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">List of class interceptors.</p></div></td>
</tr>
</tbody>
</table>
<p class="">Configuration parameters prefixed with <code>quarkus.dynamodb.aws</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>region</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Region that hosts DynamoDB.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>DEFAULT</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Credentials that should be used <code>DEFAULT</code>, <code>STATIC</code>, <code>SYSTEM_PROPERTY</code>, <code>ENV_VARIABLE</code>, <code>PROFILE</code>, <code>CONTAINER</code>, <code>INSTANCE_PROFILE</code>, <code>PROCESS</code>, <code>ANONYMOUS</code></p></div></td>
</tr>
</tbody>
</table>
<p class="">Credentials specific parameters prefixed with <code>quarkus.dynamodb.aws.credentials</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">DEFAULT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>default-provider.async-credential-update-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Should fetch credentials async.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>default-provider.reuse-last-provider-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Should reuse the last successful credentials.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">STATIC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>static-provider.access-key-id</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">AWS access key id.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>static-provider.secret-access-key</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">AWS secret access key.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROFILE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>profile-provider.profile-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>default</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The name of the profile to use.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROCESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.command</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Command to execute to retrieve credentials.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.process-output-limit</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">1024</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max bytes to retrieve from process.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.credential-refresh-threshold</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>PT15S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The amount of time between credentials expire and credentials refreshed.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.async-credential-update-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Should fetch credentials async.</p></div></td>
</tr>
</tbody>
</table>
<p class="">In case of synchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.sync-client</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-acquisition-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>10S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection acquisation timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-max-idle-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>60S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time to connection to be opened.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-time-to-live</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time connection to be open.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>socket-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>30S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Time to wait for data.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connections</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>50</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max connections.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>expect-continue-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Client send an HTTP <code>expect-continue</code> handsake.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>use-idle-connection-reaper</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connections in pool should be closed asynchronously.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.endpoint</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Endpoint of the proxy server.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Enables HTTP proxy.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Proxy username.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Proxy password.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.ntlm-domain</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">For NTLM, domain name.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.ntlm-workstation</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">For NTLM, workstation name.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.preemptive-basic-authentication-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Authenticate pre-emptively.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.non-proxy-hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">List of non proxy hosts.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>system-property</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Path to key store.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store type.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store password.</p></div></td>
</tr>
</tbody>
</table>
<p class="">In case of asynchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.async-client</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-acquisition-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>10S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection acquisation timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-max-idle-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>60S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time to connection to be opened.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-time-to-live</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time connection to be open.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-concurrency</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>50</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max number of concurrent connections.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>use-idle-connection-reaper</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connections in pool should be closed asynchronously.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>read-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>30S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Read timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>30S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Write timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.endpoint</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Endpoint of the proxy server.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Enables HTTP proxy.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.non-proxy-hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">List of non proxy hosts.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>system-property</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Path to key store.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store type.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store password.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>ssl-provider</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">SSL Provider (<code>jdk</code>, <code>openssl</code>, <code>openssl-refcnt</code>).</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>protocol</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>HTTP_1_1</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Sets the HTTP protocol.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-http2-streams</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max number of concurrent streams.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>event-loop.override</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Enable custom event loop conf.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>event-loop.number-of-threads</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Number of threads to use in event loop.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>event-loop.thread-name-prefix</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>aws-java-sdk-NettyEventLoop</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Prefix of thread names.</p></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_neo4j"><a class="anchor" href="#_neo4j"></a><a class="link" href="#_neo4j">Neo4j</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://neo4j.com/" target="_blank" rel="noopener">Neo4j</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-neo4j"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.neo4j.driver.Driver driver;</code></pre>
</div>
</div>
<p class="">Configuration properties:</p>
<p class=""><code>quarkus.neo4j</code> as prefix is skipped in the next table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>uri</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>localhost:7687</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI of Neo4j.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication</code>
<code>.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>neo4j</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication</code>
<code>.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>neo4j</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication</code>
<code>.disabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>pool.metrics-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable metrics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>pool.log-leaked-sessions</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable leaked sessions logging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>pool.max-connection-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>100</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max amount of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>pool.max-connection-lifetime</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>1H</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pooled connections older will be closed and removed from the pool.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>pool.connection-acquisition-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>1M</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timout for connection adquisation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>pool.idle-time-before-connection-test</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>-1</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pooled connections idled in the pool for longer than this timeout will be tested before they are used.</p></td>
</tr>
</tbody>
</table>
<p class="">As Neo4j uses SSL communication by default, to create a native executable you need to compile with next options GraalVM options:</p>
<p class=""><code>-H:EnableURLProtocols=http,https --enable-all-security-services -H:+JNI</code></p>
<p class="">And Quarkus Maven Plugin with next configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;
&lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;native-image&lt;/id&gt;
        &lt;goals&gt;
            &lt;goal&gt;native-image&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;enableHttpUrlHandler&gt;true
            &lt;/enableHttpUrlHandler&gt;
            &lt;enableHttpsUrlHandler&gt;true
            &lt;/enableHttpsUrlHandler&gt;
            &lt;enableAllSecurityServices&gt;true
            &lt;/enableAllSecurityServices&gt;
            &lt;enableJni&gt;true&lt;/enableJni&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
&lt;/executions&gt;</code></pre>
</div>
</div>
<p class="">Alternatively, and as a not recommended way in production, you can disable SSL and Quarkus will disable Bolt SSL as well. <code>quarkus.ssl.native=false</code>.</p>
<p class="">If you are using Neo4j 4.0, you can use fully reactive.
Add next depenency management <code>io.projectreactor:reactor-bom:Californium-SR4:pom:import</code> and dependency: <code>io.projectreactor:reactor-core</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public Publisher&lt;String&gt; get() {
        return Flux.using(driver::rxSession, ...);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mongodb_client"><a class="anchor" href="#_mongodb_client"></a><a class="link" href="#_mongodb_client">MongoDB Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.mongodb.com/" target="_blank" rel="noopener">MongoDB</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-mongodb-client"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
com.mongodb.client.MongoClient client;

@Inject
io.quarkus.mongodb.ReactiveMongoClient client;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mongodb.connection-string=mongodb://localhost:27018
quarkus.mongodb.write-concern.journal=false</code></pre>
</div>
</div>
<p class=""><code>quarkus.mongodb</code> as prefix is skipped in the next table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-string</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">MongoDB connection URI.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>List&lt;String&gt;</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Addresses passed as <code>host:port</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>application-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>min-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connection-idle-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle time of a pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connection-life-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Life time of pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>wait-queue-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum wait time for new connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>maintenance-frequency</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time period between runs of maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>maintenance-initial-delay</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait before running the first maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>wait-queue-multiple</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Multiplied with <code>max-pool-size</code> gives max numer of threads waiting.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>socket-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-insecure</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [false]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insecure TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [false]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable TLS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>replica-set-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implies hosts given are a seed list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>server-selection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait for server selection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>local-threshold</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum ping time to make a server eligible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>heartbeat-frequency</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency to determine the state of servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>read-preference</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>primary</code>,
<code>primaryPreferred</code>,
<code>secondary</code>,
<code>secondaryPreferred</code>,
<code>nearest</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read preferences.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-wait-queue-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of concurrent operations allowed to wait.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.safe</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [true]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures are writes are ack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.journal</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [true]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Journal writing aspect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.w</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.retry-writes</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [false]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry writes if network fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.w-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.auth-mechanism</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>MONGO-CR</code>, <code>GSSAPI</code>, <code>PLAIN</code>, <code>MONGODB-X509</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.auth-source</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source of the authentication credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.auth-mechanism-properties</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Map&lt;String, String&gt;</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication mechanism properties.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_mongodb_panache"><a class="anchor" href="#_mongodb_panache"></a><a class="link" href="#_mongodb_panache">MongoDB Panache</a></h2>
<div class="sectionbody">
<p class="">You can also use the Panache framework to write persistence part when using MongoDB.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="mongodb-panache"</code></pre>
</div>
</div>
<p class="">MongoDB configuration comes from <a href="#_mongodb_client">MongoDB Client</a> section.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@MongoEntity(collection="ThePerson")
public class Person extends PanacheMongoEntity {
    public String name;

    @BsonProperty("birth")
    public LocalDate birthDate;

    public Status status;
}</code></pre>
</div>
</div>
<p class="">Possible annotations in fields: <code>@BsonId</code> (for custom ID), <code>@BsonProperty</code> and <code>@BsonIgnore</code>.</p>
<p class=""><strong>Important:</strong> <code>@MongoEntity</code> is optional.</p>
<p class="">Methods provided are similar of the ones shown in <a href="#_persistence">Persistence</a> section.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">person.persist();
person.update();
person.delete();

List&lt;Person&gt; allPersons = Person.listAll();
person = Person.findById(personId);
List&lt;Person&gt; livingPersons = Person.list("status", Status.Alive);
List&lt;Person&gt; persons = Person.list(Sort.by("name").and("birth"));

long countAll = Person.count();

Person.delete("status", Status.Alive);</code></pre>
</div>
</div>
<p class="">All <code>list</code> methods have equivalent <code>stream</code> versions.</p>
<p class=""><strong>Pagination</strong></p>
<p class="">You can also use pagination:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons =
    Person.find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<p class=""><strong>Queries</strong></p>
<p class="">Native MongoDB queries are supported (if they start with <code>{</code> or <code>org.bson.Document</code> instance) as well as Panache Queries.
Panache Queries equivalence in MongoDB:</p>
<div class="ulist">
<ul>
<li>
<p><code>firstname = ?1 and status = ?2</code> &#8594; <code>{'firstname': ?1, 'status': ?2}</code></p>
</li>
<li>
<p><code>amount &gt; ?1 and firstname != ?2</code> &#8594; <code>{'amount': {'$gt': ?1}, 'firstname': {'$ne': ?2}}</code></p>
</li>
<li>
<p><code>lastname like ?1</code> &#8594; <code>{'lastname': {'$regex': ?1}}</code></p>
</li>
<li>
<p><code>lastname is not null</code> &#8594; <code>{'lastname':{'$exists': true}}</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon icon-warning">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-triangle" class="svg-inline--fa fa-exclamation-triangle fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
PanacheQL refers to the Object parameter name but native queries refer to MongoDB field names.
</td>
</tr>
</table>
</div>
<p class=""><strong>DAO pattern</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class PersonRepository
    implements PanacheMongoRepository&lt;Person&gt; {
}</code></pre>
</div>
</div>
<p class="">If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_programming"><a class="anchor" href="#_reactive_programming"></a><a class="link" href="#_reactive_programming">Reactive Programming</a></h2>
<div class="sectionbody">
<p class="">Quarkus implements <a href="https://github.com/eclipse/microprofile-reactive-streams-operators" target="_blank" rel="noopener">MicroProfile Reactive spec</a> and uses RXJava2 to provide reactive programming model.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-streams-operators"</code></pre>
</div>
</div>
<p class="">Asynchronous HTTP endpoint is implemented by returning Java <code>CompletionStage</code>.
You can create this class either manually or using MicroProfile Reactive Streams spec:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Path("/reactive")
@Produces(MediaType.TEXT_PLAIN)
public CompletionStage&lt;String&gt; getHello() {
    return ReactiveStreams.of("h", "e", "l", "l", "o")
    .map(String::toUpperCase)
    .toList()
    .run()
    .thenApply(list -&gt; list.toString());
}</code></pre>
</div>
</div>
<p class="">Creating streams is also easy, you just need to return <code>Publisher</code> object.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Path("/stream")
@Produces(MediaType.SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; publishers() {
        return Flowable
        .interval(500, TimeUnit.MILLISECONDS)
        .map(s -&gt; atomicInteger.getAndIncrement())
        .map(i -&gt; Integer.toString(i));
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_messaging"><a class="anchor" href="#_reactive_messaging"></a><a class="link" href="#_reactive_messaging">Reactive Messaging</a></h2>
<div class="sectionbody">
<p class="">Quarkus relies on MicroProfile <a href="https://github.com/eclipse/microprofile-reactive-messaging" target="_blank" rel="noopener">Reactive Messaging spec</a> to implement reactive messaging streams.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
        io.quarkus:quarkus-smallrye-reactive-messaging"</code></pre>
</div>
</div>
<p class="">You can just start using in-memory streams by using <code>@Incoming</code> to produce data and <code>@Outgoing</code> to consume data.</p>
<p class="">Produce every 5 seconds one piece of data.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ProducerData {

    @Outgoing("my-in-memory")
    public Flowable&lt;Integer&gt; generate() {
        return Flowable.interval(5, TimeUnit.SECONDS)
                .map(tick -&gt; random.nextInt(100));
    }
}</code></pre>
</div>
</div>
<p class="">If you want to dispatch to all subscribers you can annotate the method with <code>@Broadcast</code>.</p>
<p class="">Consumes generated data from <code>my-in-memory</code> stream.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ConsumerData {
    @Incoming("my-in-memory")
    public void randomNumber(int randomNumber) {
        System.out.println("Received " + randomNumber);
    }
}</code></pre>
</div>
</div>
<p class="">You can also inject an stream as a field:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Stream("my-in-memory") Publisher&lt;Integer&gt; randomRumbers;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream("generated-price")
Emitter&lt;String&gt; emitter;</code></pre>
</div>
</div>
<p class=""><strong>Patterns</strong></p>
<p class=""><em>REST API &#8594; Message</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(in)
Emitter&lt;String&gt; emitter;

emitter.send(message);</code></pre>
</div>
</div>
<p class=""><em>Message &#8594; Message</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Incoming(in)
@Outgoing(out)
public String process(String in) {
}</code></pre>
</div>
</div>
<p class=""><em>Message &#8594; SSE</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(out)
Publisher&lt;String&gt; result;

@GET
@Produces(SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; stream() {
    return result;
}</code></pre>
</div>
</div>
<p class=""><em>Message &#8594; Business Logic</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ReceiverMessages {
    @Incoming("prices")
    public void print(String price) {
    }
}</code></pre>
</div>
</div>
<p class="">Possible implementations are:</p>
<p class=""><strong>In-Memory</strong></p>
<p class="">If the stream is not configured then it is assumed to be an in-memory stream, if not then stream type is defined by <code>connector</code> field.</p>
<p class=""><strong>Kafka</strong></p>
<p class="">To integrate with Kafka you need to add next extensions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-messaging-kafka"</code></pre>
</div>
</div>
<p class="">Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
<p class="">Kafka configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
<p class="">The <code>connector</code> type is <code>smallrye-kafka</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.generated-price.connector=
    smallrye-kafka
mp.messaging.outgoing.generated-price.topic=
    prices
mp.messaging.outgoing.generated-price.bootstrap.servers=
    localhost:9092
mp.messaging.outgoing.generated-price.value.serializer=
    org.apache.kafka.common.serialization.IntegerSerializer

mp.messaging.incoming.prices.connector=
    smallrye-kafka
mp.messaging.incoming.prices.value.deserializer=
    org.apache.kafka.common.serialization.IntegerDeserializer</code></pre>
</div>
</div>
<p class="">A complete list of supported properties are in Kafka site. For the <a href="https://kafka.apache.org/documentation/#producerconfigs" target="_blank" rel="noopener">producer</a> and for <a href="https://kafka.apache.org/documentation/#consumerconfigs" target="_blank" rel="noopener">consumer</a></p>
<p class=""><em>JSON-B Serializer/Deserializer</em></p>
<p class="">You can use JSON-B to serialize/deserialize objects.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kafka-client"</code></pre>
</div>
</div>
<p class="">To serialize you can use <code>io.quarkus.kafka.client.serialization.JsonbSerializer</code>.</p>
<p class="">To deserialize you need to extend <code>io.quarkus.kafka.client.serialization.JsonbDeserializer</code> and provide a type.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class BeerDeserializer
    extends JsonbDeserializer&lt;Beer&gt; {

    public BeerDeserializer() {
        super(Beer.class);
    }

}</code></pre>
</div>
</div>
<p class=""><strong>AMQP</strong></p>
<p class="">To integrate with AMQP you need to add next extensions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="reactive-messaging-amqp"</code></pre>
</div>
</div>
<p class="">Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
<p class="">AMQP configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.
Special properties <code>amqp-username</code> and <code>amqp-password</code> are used to configure AMQP broker credentials.</p>
<p class="">The connector type is <code>smallrye-amqp</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">amqp-username=quarkus
amqp-password=quarkus
# write
mp.messaging.outgoing.generated-price.connector=
    smallrye-amqp
mp.messaging.outgoing.generated-price.address=
    prices
mp.messaging.outgoing.generated-price.durable=
    true
# read
mp.messaging.incoming.prices.connector=
    smallrye-amqp
mp.messaging.incoming.prices.durable=
    true</code></pre>
</div>
</div>
<p class="">A complete list of supported properties for <a href="https://smallrye.io/smallrye-reactive-messaging/#_interacting_using_amqp" target="_blank" rel="noopener">AMQP</a>.</p>
<p class=""><strong>MQTT</strong></p>
<p class="">To integrate with MQTT you need to add next extensions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="vertx, smallrye-reactive-streams-operators
        smallrye-reactive-messaging"</code></pre>
</div>
</div>
<p class="">And add <code>io.smallrye.reactive:smallrye-reactive-messaging-mqtt-1.0:0.0.10</code> dependency in your build tool.</p>
<p class="">Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
<p class="">MQTT configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
<p class="">The connector type is <code>smallrye-mqtt</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.topic-price.type=
    smallrye-mqtt
mp.messaging.outgoing.topic-price.topic=
    prices
mp.messaging.outgoing.topic-price.host=
    localhost
mp.messaging.outgoing.topic-price.port=
    1883
mp.messaging.outgoing.topic-price.auto-generated-client-id=
    true

mp.messaging.incoming.prices.type=
    smallrye-mqtt
mp.messaging.incoming.prices.topic=
    prices
mp.messaging.incoming.prices.host=
    localhost
mp.messaging.incoming.prices.port=
    1883
mp.messaging.incoming.prices.auto-generated-client-id=
    true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kafka_streams"><a class="anchor" href="#_kafka_streams"></a><a class="link" href="#_kafka_streams">Kafka Streams</a></h2>
<div class="sectionbody">
<p class="">Create streaming queries with the Kafka Streams API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kafka-streams"</code></pre>
</div>
</div>
<p class="">All we need to do for that is to declare a CDI producer method which returns the Kafka Streams <code>org.apache.kafka.streams.Topology</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TopologyProducer {
    @Produces
    public Topology buildTopology() {
        org.apache.kafka.streams.StreamsBuilder.StreamsBuilder
            builder = new StreamsBuilder();
        // ...
        builder.stream()
            .join()
            // ...
            .toStream()
            .to();
        return builder.build();
    }
}</code></pre>
</div>
</div>
<p class="">Previous example produces content to another stream.
If you want to write interactive queries, you can use Kafka streams.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KafkaStreams streams;

return streams
        .store("stream", QueryableStoreTypes.keyValueStore());</code></pre>
</div>
</div>
<p class="">The Kafka Streams extension is configured via the Quarkus configuration file <code>application.properties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.bootstrap-servers=localhost:9092
quarkus.kafka-streams.application-id=temperature-aggregator
quarkus.kafka-streams.application-server=${hostname}:8080
quarkus.kafka-streams.topics=weather-stations,temperature-values

kafka-streams.cache.max.bytes.buffering=10240
kafka-streams.commit.interval.ms=1000</code></pre>
</div>
</div>
<p class=""><strong>IMPORTANT:</strong> All the properties within the <code>kafka-streams</code> namespace are passed through as-is to the Kafka Streams engine. Changing their values requires a rebuild of the application.</p>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_postgresql_client"><a class="anchor" href="#_reactive_postgresql_client"></a><a class="link" href="#_reactive_postgresql_client">Reactive PostgreSQL Client</a></h2>
<div class="sectionbody">
<p class="">You can use Reactive PostgreSQL to execute queries to PostreSQL database in a reactive way, instead of using JDBC way.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-pg-client"</code></pre>
</div>
</div>
<p class="">Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
    vertx-reactive:postgresql://host:5431/db</code></pre>
</div>
</div>
<p class="">Then you can inject <code>io.vertx.axle.pgclient.PgPool</code> class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
PgPool client;

CompletionStage&lt;JsonArray&gt; =
    client.query("SELECT * FROM table")
    .thenApply(rowSet -&gt; {
        JsonArray jsonArray = new JsonArray();
        PgIterator iterator = rowSet.iterator();
        return jsonArray;
    })</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_mysql_client"><a class="anchor" href="#_reactive_mysql_client"></a><a class="link" href="#_reactive_mysql_client">Reactive MySQL Client</a></h2>
<div class="sectionbody">
<p class="">You can use Reactive MySQL to execute queries to MySQL database in a reactive way, instead of using JDBC way.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-mysql-client"</code></pre>
</div>
</div>
<p class="">Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
    vertx-reactive:mysql://localhost:3306/db</code></pre>
</div>
</div>
<p class="">Then you can inject <code>io.vertx.axle.mysqlclient.MySQLPool</code> class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MySQLPool client;

public static CompletionStage&lt;Fruit&gt; findById(
    MySQLPool c, Long id) {
    return c.preparedQuery("SELECT name FROM fruits WHERE id = $1",
                Tuple.of(id))
            .thenApply(RowSet::iterator)
            .thenApply(iterator -&gt; iterator.hasNext() ?
                        from(iterator.next()) : null);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_activemq_artemis"><a class="anchor" href="#_activemq_artemis"></a><a class="link" href="#_activemq_artemis">ActiveMQ Artemis</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses <a href="#_reactive_messaging">Reactive Messaging</a> to integrate with messaging systems, but in case you need deeper control when using <a href="https://activemq.apache.org/components/artemis/" target="_blank" rel="noopener">Apache ActiveMQ Artemis</a> there is also an extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-core"</code></pre>
</div>
</div>
<div class="page-break"></div>
<p class="">And then you can inject <code>org.apache.activemq.artemis.api.core.client.ServerLocator</code> instance.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ServerLocator serverLocator;

    private ClientSessionFactory connection;

    @PostConstruct
    public void init() throws Exception {
        connection = serverLocator.createSessionFactory();
    }
}</code></pre>
</div>
</div>
<p class="">And configure <code>ServerLocator</code> in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.artemis.url=tcp://localhost:61616</code></pre>
</div>
</div>
<p class="">You can configure ActiveMQ Artemis in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>artemis.url</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection URL</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>artemis.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Username for authentication.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>artemis.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Password for authentication.</p></div></td>
</tr>
</tbody>
</table>
<p class=""><strong>Artemis JMS</strong></p>
<p class="">If you want to use JMS with Artemis, you can do it by using its extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-jms"</code></pre>
</div>
</div>
<p class="">And then you can inject <code>javax.jms.ConnectionFactory</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ConnectionFactory connectionFactory;

    private Connection connection;

    @PostConstruct
    public void init() throws JMSException {
        connection = connectionFactory.createConnection();
        connection.start();
    }
}</code></pre>
</div>
</div>
<p class="">INFO: Configuration options are the same as Artemis core.</p>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_rbac"><a class="anchor" href="#_rbac"></a><a class="link" href="#_rbac">RBAC</a></h2>
<div class="sectionbody">
<p class="">You can set RBAC using annotations or in <code>application.properties</code>.</p>
<p class=""><strong>Annotations</strong></p>
<p class="">You can define roles by using <code>javax.annotation.security.RolesAllowed</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<p class="">You can use <code>io.quarkus.security.Authenticated</code> as a shortcut of <code>@RolesAllowed("*")</code>.</p>
<p class=""><strong>File Configuration</strong></p>
<p class="">Defining RBAC in <code>application.properties</code> instead of using annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.auth.policy.role-policy1.roles-allowed=
    user,admin
quarkus.http.auth.permission.roles1.paths=
    /roles-secured/*,/other/*,/api/*
quarkus.http.auth.permission.roles1.policy=
    role-policy1

quarkus.http.auth.permission.permit1.paths=
    /public/*
quarkus.http.auth.permission.permit1.policy=
    permit
quarkus.http.auth.permission.permit1.methods=
    GET

quarkus.http.auth.permission.deny1.paths=
    /forbidden
quarkus.http.auth.permission.deny1.policy=
    deny</code></pre>
</div>
</div>
<p class="">You need to provide permissions set by using the <code>roles-allowed</code> property or use the built-in ones <code>deny</code>, <code>permit</code> or <code>authenticated</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_jwt"><a class="anchor" href="#_jwt"></a><a class="link" href="#_jwt">JWT</a></h2>
<div class="sectionbody">
<p class="">Quarkus implements <a href="https://github.com/eclipse/microprofile-jwt-auth" target="_blank" rel="noopener">MicroProfile JWT RBAC spec</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="io.quarkus:quarkus-smallrye-jwt"</code></pre>
</div>
</div>
<p class="">Minimum JWT required claims: <code>typ</code>, <code>alg</code>, <code>kid</code>, <code>iss</code>, <code>sub</code>, <code>exp</code>, <code>iat</code>, <code>jti</code>, <code>upn</code>, <code>groups</code>.</p>
<p class="">You can inject token by using <code>JsonWebToken</code> or a claim individually by using <code>@Claim</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
JsonWebToken jwt;

@Inject
@Claim(standard = Claims.preferred_username)
String name;

@Inject
@Claim("groups")
Set&lt;String&gt; groups;</code></pre>
</div>
</div>
<p class="">Set of supported types: <code>String</code>, <code>Set&lt;String&gt;</code>, <code>Long</code>, <code>Boolean, `javax.json.JsonValue</code>, <code>Optional</code>, <code>org.eclipse.microprofile.jwt.ClaimValue</code>.</p>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.jwt.verify.publickey.location=
    META-INF/resources/publicKey.pem
mp.jwt.verify.issuer=
    https://quarkus.io/using-jwt-rbac</code></pre>
</div>
</div>
<p class="">Configuration options:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.smallrye-jwt.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine if the jwt extension is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.smallrye-jwt.realm-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus-JWT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name to use for security realm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.smallrye-jwt.auth-mechanism</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MP-JWT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication mechanism.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mp.jwt.verify.publickey</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Public Key text itself to be supplied as a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mp.jwt.verify.publickey.location</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative path or URL of a public key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mp.jwt.verify.issuer</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>iss</code> accepted as valid.</p></div></td>
</tr>
</tbody>
</table>
<p class="">Supported public key formats:</p>
<div class="ulist">
<ul>
<li>
<p>PKCS#8 PEM</p>
</li>
<li>
<p>JWK</p>
</li>
<li>
<p>JWKS</p>
</li>
<li>
<p>JWK Base64 URL</p>
</li>
<li>
<p>JWKS Base64 URL</p>
</li>
</ul>
</div>
<p class="">To send a token to server-side you should use <code>Authorization</code> header: <code>curl -H "Authorization: Bearer eyJraWQiOi&#8230;&#8203;"</code>.</p>
<p class="">To inject claim values, the bean must be <code>@RequestScoped</code> CDI scoped.
If you need to inject claim values in scope with a lifetime greater than <code>@RequestScoped</code> then you need to use <code>javax.enterprise.inject.Instance</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Claim(standard = Claims.iat)
private Instance&lt;Long&gt; providerIAT;</code></pre>
</div>
</div>
<p class=""><strong>RBAC</strong></p>
<p class="">JWT <code>groups</code> claim is directly mapped to roles to be used in security annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openid_connect"><a class="anchor" href="#_openid_connect"></a><a class="link" href="#_openid_connect">OpenId Connect</a></h2>
<div class="sectionbody">
<p class="">Quarkus can use OpenId Connect or OAuth 2.0 authorization servers such as  <a href="https://www.keycloak.org/" target="_blank" rel="noopener">Keycloak</a> to protect resources using bearer token issued by Keycloak server.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="using-openid-connect"</code></pre>
</div>
</div>
<p class="">You can also protect resources with security annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@RolesAllowed("admin")</code></pre>
</div>
</div>
<p class="">Configure application to Keycloak service in <code>application.properties</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oidc.realm=quarkus
quarkus.oidc.auth-server-url=http://localhost:8180/auth
quarkus.oidc.resource=backend-service
quarkus.oidc.bearer-only=true
quarkus.oidc.credentials.secret=secret</code></pre>
</div>
</div>
<p class="">Configuration options with <code>quarkus.oidc</code> prefix:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>auth-server-url</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The base URL of the OpenID Connect (OIDC) server</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>introspection-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Relative path of the RFC7662 introspection service</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>jwks-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Relative path of the OIDC service returning a JWK set</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>public-key</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Public key for the local JWT token verification</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>client-id</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The client-id of the application.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.secret</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The client secret</p></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon icon-note">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" class="svg-inline--fa fa-info-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
</td>
<td class="content">
With Keycloak OIDC server <code><a href="https://host:port/auth/realms/{realm}" class="bare">https://host:port/auth/realms/{realm}</a></code> where <code>{realm}</code> has to be replaced by the name of the Keycloak realm.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can use <code>quarkus.http.cors</code> property to enable consuming form different domain.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oauth2"><a class="anchor" href="#_oauth2"></a><a class="link" href="#_oauth2">OAuth2</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with OAuth2 to be used in case of opaque tokens (none JWT) and its validation against an introspection endpoint.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="security-oauth2"</code></pre>
</div>
</div>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oauth2.client-id=client_id
quarkus.oauth2.client-secret=secret
quarkus.oauth2.introspection-url=http://oauth-server/introspect</code></pre>
</div>
</div>
<p class="">And you can map roles to be used in security annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<p class="">Configuration options:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.oauth2.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine if the OAuth2 extension is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.oauth2.client-id</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OAuth2 client id used to validate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.oauth2.client-secret</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OAuth2 client secret used to validate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.oauth2.introspection-url</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL used to validate the token and gather the authentication claims.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.oauth2.role-claim</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>scope</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The claim that is used in the endpoint response to load the roles</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_http_basic_auth"><a class="anchor" href="#_http_basic_auth"></a><a class="link" href="#_http_basic_auth">HTTP basic auth</a></h2>
<div class="sectionbody">
<p class="">HTTP basic auth is now enabled by the <code>quarkus.http-auth.basic=true</code> property.
Then you need to add <code>elytron-security-properties-file</code> or <code>elytron-security-jdbc</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_security_with_properties_file"><a class="anchor" href="#_security_with_properties_file"></a><a class="link" href="#_security_with_properties_file">Security with Properties File</a></h2>
<div class="sectionbody">
<p class="">You can also protect endpoints and store identities (user, roles) in the file system.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-properties-file"</code></pre>
</div>
</div>
<p class="">You need to configure the extension with users and roles files:</p>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.file.enabled=true
quarkus.security.users.file.users=test-users.properties
quarkus.security.users.file.roles=test-roles.properties
quarkus.security.users.file.auth-mechanism=BASIC
quarkus.security.users.file.realm-name=MyRealm
quarkus.security.users.file.plain-text=true</code></pre>
</div>
</div>
<p class="">Then <code>users.properties</code> and <code>roles.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=jb0ss
jdoe=p4ssw0rd</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=Admin,admin,Tester,user
jdoe=NoRolesUser</code></pre>
</div>
</div>
<p class=""><strong>IMPORTANT:</strong>  If <code>plain-text</code> is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
<p class="">Elytron File Properties configuration properties.
Prefix <code>quarkus.security.users</code> is skipped.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file realm is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.auth-mechanism</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>BASIC</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.realm-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Quarkus</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.plain-text</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If passwords are in plain or in MD5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.users</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>users.properties</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource of user/password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.roles</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>roles.properties</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource of user/role</p></td>
</tr>
</tbody>
</table>
<p class=""><strong>Embedded Realm</strong></p>
<p class="">You can embed user/password/role in the same <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.embedded.enabled=true
quarkus.security.users.embedded.plain-text=true
quarkus.security.users.embedded.users.scott=jb0ss
quarkus.security.users.embedded.roles.scott=admin,tester,user
quarkus.security.users.embedded.auth-mechanism=BASIC</code></pre>
</div>
</div>
<p class=""><strong>IMPORTANT:</strong>  If plain-text is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
<p class="">Prefix <code>quarkus.security.users.embedded</code> is skipped.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file realm is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.auth-mechanism</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>BASIC</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.realm-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Quarkus</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.plain-text</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If passwords are in plain or in MD5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.users.*</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>*</code> is user and value is password</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>file.roles.*</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>*</code> is user and value is role</p></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_security_with_a_jdbc_realm"><a class="anchor" href="#_security_with_a_jdbc_realm"></a><a class="link" href="#_security_with_a_jdbc_realm">Security with a JDBC Realm</a></h2>
<div class="sectionbody">
<p class="">You can also protect endpoints and store identities in a database.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-jdbc"</code></pre>
</div>
</div>
<p class="">You still need to add the database driver (ie <code>jdbc-h2</code>).</p>
<p class="">You need to configure JDBC and Elytron JDBC Realm:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.username=sa
quarkus.datasource.password=sa

quarkus.security.jdbc.enabled=true
quarkus.security.jdbc.principal-query.sql=
    SELECT u.password, u.role FROM test_user u WHERE u.user=?
quarkus.security.jdbc.principal-query
    .clear-password-mapper.enabled=true
quarkus.security.jdbc.principal-query
    .clear-password-mapper.password-index=1
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.index=2
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.to=groups</code></pre>
</div>
</div>
<p class="">You need to set the index (1-based) of password and role.</p>
<p class="">Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.security.jdbc</code> is skipped.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>auth-mechanism</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>BASIC</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>realm-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Quarkus</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the properties store is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.sql</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sql query to find the password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.datasource</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The data source to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.clear-password-mapper.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the clear-password-mapper is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.clear-password-mapper.password-index</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>1</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index of column containing clear password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.bcrypt-password-mapper.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the bcrypt-password-mapper is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.bcrypt-password-mapper.password-index</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index of column containing password hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.bcrypt-password-mapper.hash-encoding</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>BASE64</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string referencing the password hash encoding (<code>BASE64</code> or <code>HEX</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.bcrypt-password-mapper.salt-index</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index column containing the Bcrypt salt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.bcrypt-password-mapper.salt-encoding</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>BASE64</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string referencing the salt encoding (<code>BASE64</code> or <code>HEX</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>principal-query.bcrypt-password-mapper.iteration-count-index</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index column containing the Bcrypt iteration count</p></td>
</tr>
</tbody>
</table>
<p class="">For multiple datasources you can use the datasource name in the properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.security.jdbc.principal-query.sql=

quarkus.datasource.permissions.url=
quarkus.security.jdbc.principal-query.permissions.sql=</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vault"><a class="anchor" href="#_vault"></a><a class="link" href="#_vault">Vault</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.vaultproject.io/">Vault</a> to manage secrets or protecting sensitive data.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="vault"</code></pre>
</div>
</div>
<p class="">And configuring Vault in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># vault url
quarkus.vault.url=http://localhost:8200

quarkus.vault.authentication.userpass.username=
    bob
quarkus.vault.authentication.userpass.password=
    sinclair

# path within the kv secret engine
quarkus.vault.secret-config-kv-path=
    myapps/vault-quickstart/config</code></pre>
</div>
</div>
<p class="">Then you can inject the value configured at <code>secret/myapps/vault-quickstart/a-private-key</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "a-private-key")
String privateKey;</code></pre>
</div>
</div>
<p class="">You can access the KV engine programmatically:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultKVSecretEngine kvSecretEngine;

kvSecretEngine.readSecret("myapps/vault-quickstart/" + vaultPath).toString();</code></pre>
</div>
</div>
<p class=""><strong>Fetching credentials DB</strong></p>
<p class="">With the next <em>kv</em> <code>vault kv put secret/myapps/vault-quickstart/db password=connor</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.vault.credentials-provider.mydatabase.kv-path=
    myapps/vault-quickstart/db
quarkus.datasource.credentials-provider=
    mydatabase

quarkus.datasource.url=
    jdbc:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    org.postgresql.Driver
quarkus.datasource.username=
    sarah</code></pre>
</div>
</div>
<p class="">No password is set as it is fetched from Vault.</p>
<p class="">INFO: <a href="https://www.vaultproject.io/docs/secrets/databases/index.html">dynamic database credentials</a> through the <code>database-credentials-role</code> property.</p>
<p class="">Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.vault</code> is skipped.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>url</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vault server URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.client-token</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vault token to access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.app-role.role-id</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role Id for AppRole auth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.app-role.secret-id</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secret Id for AppRole auth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.userpass.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for userpass auth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.userpass.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for userpass auth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.kubernetes.role</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes authentication role</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>authentication.kubernetes.jwt-token-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location of the file containing the Kubernetes JWT token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>renew-grace-period</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">1H</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renew grace period duration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>secret-config-cache-period</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">10M</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vault config source cache period</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>secret-config-kv-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vault path in kv store</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>log-confidentiality-level</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>medium</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to hide confidential infos. <code>low</code>, <code>medium</code>, <code>high</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>kv-secret-engine-version</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>1</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kv secret engine version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>kv-secret-engine-mount-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>secret</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kv secret engine path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls.skip-verify</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to bypass certificate validation on TLS communications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls.ca-cert</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Certificate bundle used to validate TLS communications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls.use-kubernetes-ca-cert</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS will be active</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connect-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>5S</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tiemout to establish a connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>read-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>1S</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request timeout</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials-provider."credentials-provider".database-credentials-role</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database credentials role</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials-provider."credentials-provider".kv-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A path in vault kv store, where we will find the kv-key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials-provider."credentials-provider".kv-key</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>password</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key name to search in vault path kv-path</p></td>
</tr>
</tbody>
</table>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_jax_rs"><a class="anchor" href="#_jax_rs"></a><a class="link" href="#_jax_rs">JAX-RS</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses JAX-RS to define <a href="https://github.com/jax-rs" target="_blank" rel="noopener">REST-ful web APIs</a>.
Under the covers, Rest-EASY is working with Vert.X directly without using any Servlet.</p>
<p class="">It is <strong>important</strong> to know that if you want to use any feature that implies a <code>Servlet</code> (ie Servlet Filters) then you need to add the <code>quarkus-undertow</code> extension to switch back to the <code>Servlet</code> ecosystem but generally speaking, you don&#8217;t need to add it as everything else is well-supported.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/book")
public class BookResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Book&gt; getAllBooks() {}

    @POST
    @Produces(MediaType.APPLICATION_JSON)
    public Response createBook(Book book) {}

    @DELETE
    @Path("{isbn}")
    @Produces(MediaType.APPLICATION_JSON)
    public Response deleteBook(
        @PathParam("isbn") String isbn) {}


    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("search")
    public Response searchBook(
        @QueryParam("description") String description) {}
}</code></pre>
</div>
</div>
<p class="">To get information from request:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@PathParam</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets content from request URI.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>/book/{id} @PathParam("id")</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@QueryParam</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets query parameter.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/book?desc="" @QueryParam("desc)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@FormParam</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets form parameter.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@MatrixParam</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get URI matrix parameter.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>/book;author=mkyong;country=malaysia</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@CookieParam</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets cookie param by name.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@HeaderParam</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets header parameter by name.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<p class="">Valid HTTP method annotations provided by the spec are: <code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, <code>@PATCH</code>, <code>@HEAD</code> and <code>@OPTIONS</code>.</p>
<p class="">You can create new annotations that bind to HTTP methods not defined by the spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@HttpMethod("LOCK")
public @interface LOCK {
}

@LOCK
public void lockIt() {}
}</code></pre>
</div>
</div>
<p class=""><strong>Injecting</strong></p>
<p class="">Using <code>@Context</code> annotation to inject JAX-RS and Servlet information.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
public String getBase(@Context UriInfo uriInfo) {
    return uriInfo.getBaseUri();
}</code></pre>
</div>
</div>
<p class="">Possible injectable objects: <code>SecurityContext</code>, <code>Request</code>, <code>Application</code>, <code>Configuration</code>, <code>Providers</code>, <code>ResourceContext</code>, <code>ServletConfig</code>, <code>ServletContext</code>, <code>HttpServletRequest</code>, <code>HttpServletResponse</code>, <code>HttpHeaders</code>, <code>Urinfo</code>, <code>SseEventSink</code> and <code>Sse</code>.</p>
<p class=""><strong>HTTP Filters</strong></p>
<p class="">HTTP request and response can be intercepted to manipulate the metadata (ie headers, parameters, media type, &#8230;&#8203;) or abort a request.
You only need to implement the next <code>ContainerRequestFilter</code> and <code>ContainerResponseFilter</code> JAX-RS interfaces respectively.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class LoggingFilter
        implements ContainerRequestFilter {

    @Context
    UriInfo info;

    @Context
    HttpServletRequest request;

    @Override
    public void filter(ContainerRequestContext context) {
        final String method = context.getMethod();
        final String path = info.getPath();
        final String address = request.getRemoteAddr();
        System.out.println("Request %s %s from IP %s",
                method, path, address);
    }

}</code></pre>
</div>
</div>
<p class=""><strong>Exception Mapper</strong></p>
<p class="">You can map exceptions to produce a custom output by implementing <code>ExceptionMapper</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class ErrorMapper
    implements ExceptionMapper&lt;Exception&gt; {

    @Override
    public Response toResponse(Exception exception) {
        int code = 500;
        if (exception instanceof WebApplicationException) {
            code = ((WebApplicationException) exception)
                .getResponse().getStatus();
        }
        return Response.status(code)
            .entity(
                Json.createObjectBuilder()
                .add("error", exception.getMessage())
                .add("code", code)
                .build()
            )
            .build();
        }
    }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vert_x_filters_and_routes"><a class="anchor" href="#_vert_x_filters_and_routes"></a><a class="link" href="#_vert_x_filters_and_routes">Vert.X Filters and Routes</a></h2>
<div class="sectionbody">
<p class=""><strong>Programmatically</strong></p>
<p class="">You can also register Vert.X Filters and Router programmatically inside a CDI bean:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.vertx.http.runtime.filters.Filters;
import io.vertx.ext.web.Router;
import javax.enterprise.context.ApplicationScoped;
import javax.enterprise.event.Observes;

@ApplicationScoped
public class MyBean {

    public void filters(
            @Observes Filters filters) {
        filters
            .register(
                rc -&gt; {
                    rc.response()
                        .putHeader("X-Filter", "filter 1");
                    rc.next();
                },
                10);
    }

    public void routes(
            @Observes Router router) {
        router
            .get("/")
            .handler(rc -&gt; rc.response().end("OK"));
    }
}</code></pre>
</div>
</div>
<p class=""><strong>Declarative</strong></p>
<p class="">You can use <code>@Route</code> annotation to use reactive routes in a declarative way:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-vertx-web"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class MyDeclarativeRoutes {

    @Route(path = "/hello", methods = HttpMethod.GET)
    public void greetings(RoutingContext rc) {
        String name = rc.request().getParam("name");
        if (name == null) {
            name = "world";
        }
        rc.response().end("hello " + name);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gzip_support"><a class="anchor" href="#_gzip_support"></a><a class="link" href="#_gzip_support">GZip Support</a></h2>
<div class="sectionbody">
<p class="">You can configure Quarkus to use GZip in the <code>application.properties</code> file using the next properties with <code>quarkus.resteasy</code> suffix:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>gzip.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">EnableGZip.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>gzip.max-input</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>10M</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Configure the upper limit on deflated request body.</p></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_cors_filter"><a class="anchor" href="#_cors_filter"></a><a class="link" href="#_cors_filter">CORS Filter</a></h2>
<div class="sectionbody">
<p class="">Quarkus comes with a CORS filter that can be enabled via configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.cors=true</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.http</code>.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>cors</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable CORS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>cors.origins</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Any request valid.</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of origins allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>cors.methods</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any method valid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of methods valid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>cors.headers</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any requested header valid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of valid allowed headers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>cors.exposed-headers</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of valid exposed headers.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_fault_tolerance"><a class="anchor" href="#_fault_tolerance"></a><a class="link" href="#_fault_tolerance">Fault Tolerance</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses <a href="https://github.com/eclipse/microprofile-fault-tolerance" target="_blank" rel="noopener">MicroProfile Fault Tolerance</a> spec:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-fault-tolerance"</code></pre>
</div>
</div>
<p class="">MicroProfile Fault Tolerance spec uses CDI interceptor and it can be used in several elements such as CDI bean, JAX-RS resource or MicroProfile Rest Client.</p>
<p class="">To do automatic <strong>retries</strong> on a method:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {
    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    @Retry(maxRetries = 2)
    WorldClock getNow();
}</code></pre>
</div>
</div>
<p class="">You can set fallback code in case of an error by using <code>@Fallback</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Retry(maxRetries = 1)
@Fallback(fallbackMethod = "fallbackMethod")
WorldClock getNow(){}

public WorldClock fallbackMethod() {
    return new WorldClock();
}</code></pre>
</div>
</div>
<p class=""><code>fallbackMethod</code> must have the same parameters and return type as the annotated method.</p>
<p class="">You can also set logic into a class that implements <code>FallbackHandler</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class RecoverFallback
            implements FallbackHandler&lt;WorldClock&gt; {
    @Override
    public WorldClock handle(ExecutionContext context) {
    }
}</code></pre>
</div>
</div>
<p class="">And set it in the annotation as value <code>@Fallback(RecoverFallback.class)</code>.</p>
<p class="">In case you want to use <strong>circuit breaker</strong> pattern:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CircuitBreaker(requestVolumeThreshold = 4,
                failureRatio=0.75,
                delay = 1000)
WorldClock getNow(){}</code></pre>
</div>
</div>
<p class="">If 3 <code>(4 x 0.75)</code> failures occur among the rolling window of 4 consecutive invocations then the circuit is opened for 1000 ms and then be back to half open.
If the invocation succeeds then the circuit is back to closed again.</p>
<p class="">You can use <strong>bulkahead</strong> pattern to limit the number of concurrent access to the same resource.
If the operation is synchronous it uses a semaphore approach, if it is asynchronous a thread-pool one.
When a request cannot be processed <code>BulkheadException</code> is thrown.
It can be used together with any other fault tolerance annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Bulkhead(5)
@Retry(maxRetries = 4,
       delay = 1000,
       retryOn = BulkheadException.class)
WorldClock getNow(){}</code></pre>
</div>
</div>
<p class="">Fault tolerance annotations:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Properties</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>unit</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Retry</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>maxRetries</code>, <code>delay</code>, <code>delayUnit</code>, <code>maxDuration</code>, <code>durationUnit</code>, <code>jitter</code>, <code>jitterDelayUnit</code>, <code>retryOn</code>, <code>abortOn</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Fallback</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>fallbackMethod</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Bulkhead</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>waitingTaskQueue</code> (only valid in asynchronous)</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@CircuitBreaker</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>failOn</code>, <code>delay</code>, <code>delayUnit</code>, <code>requestVolumeThreshold</code>, <code>failureRatio</code>, <code>successThreshold</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Asynchronous</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<p class="">You can override annotation parameters via configuration file using property <code>[classname/methodname/]annotation/parameter</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/maxDuration=30
# Class scope
org.acme.quickstart.WorldClock/Retry/maxDuration=3000
# Global
Retry/maxDuration=3000</code></pre>
</div>
</div>
<p class="">You can also enable/disable policies using special parameter <code>enabled</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/enabled=false
# Disable everything except fallback
MP_Fault_Tolerance_NonFallback_Enabled=false</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
MicroProfile Fault Tolerance integrates with MicroProfile Metrics spec. You can disable it by setting <code>MP_Fault_Tolerance_Metrics_Enabled</code> to false.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observability"><a class="anchor" href="#_observability"></a><a class="link" href="#_observability">Observability</a></h2>
<div class="sectionbody">
<p class=""><strong>Health Checks</strong></p>
<p class="">Quarkus relies on <a href="https://github.com/eclipse/microprofile-health" target="_blank" rel="noopener">MicroProfile Health</a> spec to provide health checks.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-health"</code></pre>
</div>
</div>
<p class="">By just adding this extension, an endpoint is registered to <code>/health</code> providing a default health check.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
    ]
}</code></pre>
</div>
</div>
<p class="">To create a custom health check you need to implement the <code>HealthCheck</code> interface and annotate either with <code>@Readiness</code> (ready to process requests) or <code>@Liveness</code> (is running) annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Readiness
public class DatabaseHealthCheck implements HealthCheck {
    @Override
    public HealthCheckResponse call() {
        HealthCheckResponseBuilder responseBuilder =
            HealthCheckResponse.named("Database conn");

        try {
            checkDatabaseConnection();
            responseBuilder.withData("connection", true);
            responseBuilder.up();
        } catch (IOException e) {
            // cannot access the database
            responseBuilder.down()
                    .withData("error", e.getMessage());
        }
        return responseBuilder.build();
    }
}</code></pre>
</div>
</div>
<p class="">Builds the next output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
        {
            "name": "Database conn",
            "status": "UP",
            "data": {
                "connection": true
            }
        }
    ]
}</code></pre>
</div>
</div>
<p class="">Since health checks are CDI beans, you can do:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DatabaseHealthCheck {

    @Produces
    @Liveness
    HealthCheck check1() {
      return io.smallrye.health.HealthStatus
                                .up("successful-live");
    }

    @Produces
    @Readiness
    HealthCheck check2() {
      return HealthStatus
                .state("successful-read", this::isReady)
    }

    private boolean isReady() {}
}</code></pre>
</div>
</div>
<p class="">You can ping liveness or readiness health checks individually by querying <code>/health/live</code> or <code>/health/ready</code>.</p>
<p class="">Quarkus comes with some <code>HealthCheck</code> implementations for checking service status.</p>
<div class="ulist">
<ul>
<li>
<p><strong>SocketHealthCheck</strong>: checks if host is reachable using a socket.</p>
</li>
<li>
<p><strong>UrlHealthCheck</strong>: checks if host is reachable using a Http URL connection.</p>
</li>
<li>
<p><strong>InetAddressHealthCheck</strong>: checks if host is reachable using <code>InetAddress.isReachable</code> method.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@Liveness
HealthCheck check1() {
    return new UrlHealthCheck("https://www.google.com")
            .name("Google-Check");
}</code></pre>
</div>
</div>
<p class="">If you want to override or set manually readiness/liveness probes, you can do it by setting health properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-health.root-path=/hello
quarkus.smallrye-health.liveness-path=/customlive
quarkus.smallrye-health.readiness-path=/customready</code></pre>
</div>
</div>
<p class=""><strong>Metrics</strong></p>
<p class="">Quarkus can utilize the <a href="https://github.com/eclipse/microprofile-metrics" target="_blank" rel="noopener">MicroProfile Metrics spec</a> to provide metrics support.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-metrics"</code></pre>
</div>
</div>
<p class="">The metrics can be read with JSON or the OpenMetrics format.
An endpoint is registered automatically at <code>/metrics</code> providing default metrics.</p>
<p class="">MicroProfile Metrics annotations:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Timed</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Tracks the duration.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Metered</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Tracks the frequency of invocations.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Counted</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Counts number of invocations.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Gauge</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Samples the value of the annotated object.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@ConcurrentGauge</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Gauge to count parallel invocations.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Metric</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Used to inject a metric. Valid types <code>Meter</code>, <code>Timer</code>, <code>Counter</code>, <code>Histogram</code>. <code>Gauge</code> only on producer methods/fields.</p></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
//...
@Timed(name = "checksTimer",
description = "A measure of how long it takes
                                to perform a hello.",
unit = MetricUnits.MILLISECONDS)
public String hello() {}

@Counted(name = "countWelcome",
description = "How many welcome have been performed.")
public String hello() {}</code></pre>
</div>
</div>
<p class=""><code>@Gauge</code> annotation returning a measure as a gauge.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Gauge(name = "hottestSauce", unit = MetricUnits.NONE,
description = "Hottest Sauce so far.")
public Long hottestSauce() {}</code></pre>
</div>
</div>
<p class="">Injecting a histogram using <code>@Metric</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Metric(name = "histogram")
Histogram historgram;</code></pre>
</div>
</div>
<p class=""><strong>Tracing</strong></p>
<p class="">Quarkus can utilize the <a href="https://github.com/eclipse/microprofile-opentracing" target="_blank" rel="noopener">MicroProfile OpenTracing</a> spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-opentracing"</code></pre>
</div>
</div>
<p class="">Requests sent to any endpoint are traced automatically.</p>
<p class="">This extension includes OpenTracing support and <code>Jaeger</code> tracer.</p>
<p class="">Jaeger tracer configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.jaeger.service-name=myservice
quarkus.jaeger.sampler-type=const
quarkus.jaeger.sampler-param=1
quarkus.jaeger.endpoint=http://localhost:14268/api/traces</code></pre>
</div>
</div>
<p class=""><code>@Traced</code> annotation can be set to disable tracing at class or method level.</p>
<p class=""><code>Tracer</code> class can be injected into the class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Tracer tracer;

tracer.activeSpan().setBaggageItem("key", "value");</code></pre>
</div>
</div>
<p class="">You can disable <code>Jaeger</code> extension by using <code>quarkus.jaeger.enabled</code> property.</p>
<p class=""><strong>Additional tracers</strong></p>
<p class=""><strong>JDBC Tracer</strong></p>
<p class="">Adds a span for each JDBC queries.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;
    &lt;artifactId&gt;opentracing-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Configure JDBC driver apart from tracing properties seen before:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># add ':tracing' to your database URL
quarkus.datasource.url=
    jdbc:tracing:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    io.opentracing.contrib.jdbc.TracingDriver
quarkus.hibernate-orm.dialect=
    org.hibernate.dialect.PostgreSQLDialect</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_cloud"><a class="anchor" href="#_cloud"></a><a class="link" href="#_cloud">Cloud</a></h2>
<div class="sectionbody">
<p class=""><strong>Native</strong></p>
<p class="">You can build a native image by using GraalVM.
The common use case is creating a Docker image so you can execute the next commands:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw package -Pnative -Dnative-image.docker-build=true

docker build -f src/main/docker/Dockerfile.native
                    -t quarkus/getting-started .
docker run -i --rm -p 8080:8080 quarkus/getting-started</code></pre>
</div>
</div>
<p class="">To configure native application, you can create a <code>config</code> directory at the same place as the native file and place an <code>application.properties</code> file inside. <code>config/application.properties</code>.</p>
<p class=""><strong>Kubernetes</strong></p>
<p class="">Quarks can use <a href="https://github.com/dekorateio/dekorate">Dekorate</a> to generate Kubernetes resources.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="io.quarkus:quarkus-kubernetes"</code></pre>
</div>
</div>
<p class="">Running <code>./mvnw package</code> the Kubernetes resources are created at <code>target/wiring-classes/META-INF/kubernetes/</code> directory.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.kubernetes.group</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Current username</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Set Docker Username.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.application.name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Current project name</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Project name</p></div></td>
</tr>
</tbody>
</table>
<p class="">Generated resource is integrated with <a href="#_observability">MicroProfile Health annotations</a>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_client"><a class="anchor" href="#_kubernetes_client"></a><a class="link" href="#_kubernetes_client">Kubernetes Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://github.com/fabric8io/kubernetes-client" target="_blank" rel="noopener">Fabric8 Kubernetes Client</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="terminal" class="language-terminal hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kubernetes-client"</code></pre>
</div>
</div>
<p class="">List of Kubernetes client parameters.</p>
<p class=""><code>quarkus.kubernetes-client</code> as prefix is skipped in the next table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>trust-certs</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust self-signed certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>master-url</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of Kubernetes API server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>namesapce</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default namespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>ca-cert-file</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CA certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>client-cert-file</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>client-cert-data</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>client-key-data</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>client-key-algorithm</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key algorithm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>client-key-passphrase</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key passphrase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>watch-reconnect-interval</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>PT1S</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Watch reconnect interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>watch-reconnect-limit</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>-1</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum reconnect attempts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>PT10S</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>request-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>PT10S</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>rolling-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>PT15M</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a rollout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>http-proxy</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>https-proxy</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">``</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy-username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy-password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>no-proxy</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP addresses or hosts to exclude from proxying</p></td>
</tr>
</tbody>
</table>
<p class="">Or programmatically:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
public class KubernetesClientProducer {

    @Produces
    public KubernetesClient kubernetesClient() {
        Config config = new ConfigBuilder()
            .withMasterUrl("https://mymaster.com")
            .build();
        return new DefaultKubernetesClient(config);
    }
}</code></pre>
</div>
</div>
<p class="">And inject it on code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KubernetesClient client;

ServiceList myServices = client.services().list();

Service myservice = client.services()
        .inNamespace("default")
        .withName("myservice")
        .get();

CustomResourceDefinitionList crds = client
        .customResourceDefinitions()
        .list();

dummyCRD = new CustomResourceDefinitionBuilder()
        ...
        .build()
client.customResourceDefinitions()
        .create(dummyCRD);</code></pre>
</div>
</div>
<div class="page-break"></div>
<p class=""><strong>Testing</strong></p>
<p class="">Quarkus provides a Kubernetes Mock test resource that starts a mock of Kubernetes API server and sets the proper environment variables needed by Kubernetes Client.</p>
<p class="">Register next dependency: <code>io.quarkus:quarkus-test-kubernetes-client:test</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(KubernetesMockServerTestResource.class)
@QuarkusTest
public class KubernetesClientTest {

    @MockServer
    private KubernetesMockServer mockServer;

    @Test
    public void test() {
        final Pod pod1 = ...
        mockServer
            .expect()
            .get()
            .withPath("/api/v1/namespaces/test/pods")
            .andReturn(200,
                new PodListBuilder()
                .withNewMetadata()
                .withResourceVersion("1")
                .endMetadata()
                .withItems(pod1, pod2)
                .build())
            .always();
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_lambda"><a class="anchor" href="#_amazon_lambda"></a><a class="link" href="#_amazon_lambda">Amazon Lambda</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with Amazon Lambda.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-amazon-lambda"</code></pre>
</div>
</div>
<p class="">And then implement <code>com.amazonaws.services.lambda.runtime.RequestHandler</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class TestLambda
        implements RequestHandler&lt;MyInput, MyOutput&gt; {
    @Override
    public MyInput handleRequest(MyOutput input,
                                    Context context) {
    }
}</code></pre>
</div>
</div>
<p class="">You can set the handler name by using <code>quarkus.lambda.handler</code> property.</p>
<p class=""><strong>Test</strong></p>
<p class="">You can write tests for Amazon lambdas:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-test-amazon-lambda&lt;/artifactId&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
public void testLambda() {
    MyInput in = new MyInput();
    in.setGreeting("Hello");
    in.setName("Stu");
    MyOutput out = LambdaClient.invoke(MyOutput.class, in);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_azure_functions"><a class="anchor" href="#_azure_functions"></a><a class="link" href="#_azure_functions">Azure Functions</a></h2>
<div class="sectionbody">
<p class="">Quarkus can make a microservice be deployable to the Azure Functions.</p>
<p class="">To scaffold a deployable microservice to the Azure Functions run:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
  -DarchetypeGroupId=io.quarkus \
  -DarchetypeArtifactId=quarkus-azure-functions-http-archetype \
  -DarchetypeVersion={version}</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_apache_camel"><a class="anchor" href="#_apache_camel"></a><a class="link" href="#_apache_camel">Apache Camel</a></h2>
<div class="sectionbody">
<p class="">Apache Camel Quarkus has its own site: <a href="https://github.com/apache/camel-quarkus" class="bare">https://github.com/apache/camel-quarkus</a></p>
</div>
</div>
<div class="sect1">
<h2 id="_websockets"><a class="anchor" href="#_websockets"></a><a class="link" href="#_websockets">WebSockets</a></h2>
<div class="sectionbody">
<p class="">Quarkus can be used to handling web sockets.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-undertow-websockets"</code></pre>
</div>
</div>
<p class="">And web sockets classes can be used:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ServerEndpoint("/chat/{username}")
@ApplicationScoped
public class ChatSocket {

    @OnOpen
    public void onOpen(Session session,
                @PathParam("username") String username) {}

    @OnClose
    public void onClose(..) {}

    @OnError
    public void onError(..., Throwable throwable) {}

    @OnMessage
    public void onMessage(...) {}

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openapi"><a class="anchor" href="#_openapi"></a><a class="link" href="#_openapi">OpenAPI</a></h2>
<div class="sectionbody">
<p class="">Quarkus can expose its API description as <a href="https://swagger.io/specification/" target="_blank" rel="noopener">OpenAPI</a> spec and test it using <a href="https://swagger.io/tools/swagger-ui/" target="_blank" rel="noopener">Swagger UI</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-openapi"</code></pre>
</div>
</div>
<p class="">Then you only need to access to <code>/openapi</code> to get OpenAPI v3 spec of services.</p>
<p class="">You can update the OpenApi path by setting <code>quarkus.smallrye-openapi.path</code> property.</p>
<p class="">Also, in case of starting Quarkus application in <code>dev</code> or <code>test</code> mode, Swagger UI is accessible at <code>/swagger-ui</code>.
If you want to use it in production mode you need to set <code>quarkus.swagger-ui.always-include</code> property to <code>true</code>.</p>
<p class="">You can update the Swagger UI path by setting <code>quarkus.swagger-ui.path</code> property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.swagger-ui.path=/my-custom-path</code></pre>
</div>
</div>
<p class="">You can customize the output by using Open API v3 annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Schema(name="Developers",
        description="POJO that represents a developer.")
public class Developer {
    @Schema(required = true, example = "Alex")
    private String name;
}

@POST
@Path("/developer")
@Operation(summary = "Create deeloper",
           description = "Only be done by admin.")
public Response createDeveloper(
        @RequestBody(description = "Developer object",
            required = true,
            content = @Content(schema =
            @Schema(implementation = Developer.class)))
                Developer developer)</code></pre>
</div>
</div>
<p class="">All possible annotations can be seen at <a href="https://github.com/eclipse/microprofile-open-api/tree/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations" target="_blank" rel="noopener">org.eclipse.microprofile.openapi.annotations</a> package.</p>
<p class="">You can also serve OpenAPI Schema from static files instead of dynamically generated from annotation scanning.</p>
<p class="">You need to put OpenAPIdocumentation under <code>META-INF</code> directory (ie: <code>META-INF/openapi.yaml</code>).</p>
<p class="">A request to <code>/openapi</code> will serve the combined OpenAPI document from the static file and the generated from annotations.
You can disable the scanning documents by adding the next configuration property: <code>mp.openapi.scan.disable=true</code>.</p>
<p class="">Other valid document paths are: <code>META-INF/openapi.yml</code>, <code>META-INF/openapi.json</code>, <code>WEB-INF/classes/META-INF/openapi.yml</code>, <code>WEB-INF/classes/META-INF/openapi.yaml</code>, <code>WEB-INF/classes/META-INF/openapi.json</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_mail_sender"><a class="anchor" href="#_mail_sender"></a><a class="link" href="#_mail_sender">Mail Sender</a></h2>
<div class="sectionbody">
<p class="">You can send emails by using Quarkus Mailer extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-mailer"</code></pre>
</div>
</div>
<p class="">You can inject two possible classes <code>io.quarkus.mailer.Mailer</code> for synchronous API or <code>io.quarkus.mailer.ReactiveMailer</code> for asynchronous API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Mailer mailer;

@Inject
ReactiveMailer reactiveMailer;</code></pre>
</div>
</div>
<p class="">And then you can use them to send an email:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(
    Mail.withText("to@acme.org", "Subject", "Body")
);

CompletionStage&lt;Void&gt; stage =
    reactiveMailer.send(
        Mail.withText("to@acme.org", "Subject", "Body")
    );</code></pre>
</div>
</div>
<p class=""><code>Mail</code> class contains methods to add <code>cc</code>, <code>bcc</code>, <code>headers</code>, <code>bounce address</code>, <code>reply to</code>, <code>attachments</code>, <code>inline attachments</code> and <code>html body</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(Mail.withHtml("to@acme.org", "Subject", body)
      .addInlineAttachment("quarkus.png",
            new File("quarkus.png"),
            "image/png", "&lt;my-image@quarkus.io&gt;"));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If you need deep control you can inject Vert.x mail client <code>@Inject  MailClient client;</code>
</td>
</tr>
</table>
</div>
<p class="">You need to configure SMTP properties to be able to send an email:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mailer.from=test@quarkus.io
quarkus.mailer.host=smtp.sendgrid.net
quarkus.mailer.port=465
quarkus.mailer.ssl=true
quarkus.mailer.username=....
quarkus.mailer.password=....</code></pre>
</div>
</div>
<p class="">List of Mailer parameters.
<code>quarkus.</code> as a prefix is skipped in the next table.</p>
<div class="page-break"></div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.from</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Default address.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.mock</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">false in <code>prod</code>, true in <code>dev</code> and <code>test</code>.</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emails not sent, just printed and stored in a <code>MockMailbox</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.bounce-address</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.host</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><em>mandatory</em></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.port</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.username</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.password</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.ssl</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables SSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.trust-all</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust all certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.max-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max open connections .</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.own-host-name</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Hostname for <code>HELO/EHLO</code> and <code>Message-ID</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.keep-alive</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection pool enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.disable-esmtp</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable ESMTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.start-tls</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>OPTIONAL</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS security mode. <code>DISABLED</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.login</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>NONE</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Login mode. <code>NONE</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.auth-methods</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All methods.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Space-separated list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.key-store</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path of the key store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.key-store-password</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key store password.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
if you enable SSL for the mailer and you want to build a native executable, you will need to enable the SSL support <code>quarkus.ssl.native=true</code>.
</td>
</tr>
</table>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">If <code>quarkus.mailer.mock</code> is set to <code>true</code>, which is the default value in <code>dev</code> and <code>test</code> mode, you can inject <code>MockMailbox</code> to get the sent messages.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MockMailbox mailbox;

@BeforeEach
void init() {
    mailbox.clear();
}

List&lt;Mail&gt; sent = mailbox
                    .getMessagesSentTo("to@acme.org");</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scheduled_tasks"><a class="anchor" href="#_scheduled_tasks"></a><a class="link" href="#_scheduled_tasks">Scheduled Tasks</a></h2>
<div class="sectionbody">
<p class="">You can schedule periodic tasks with Quarkus.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CounterBean {

    @Scheduled(every="10s")
    void increment() {}

    @Scheduled(cron="0 15 10 * * ?")
    void morningTask() {}
}</code></pre>
</div>
</div>
<p class=""><code>every</code> and <code>cron</code> parameters can be surrounded with <code>{}</code> and the value is used as config property to get the value.</p>
<div class="listingblock">
<div class="content">
<pre>@Scheduled(cron = "{morning.check.cron.expr}")
void morningTask() {}</pre>
</div>
</div>
<p class="">And configure the property into <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">morning.check.cron.expr=0 15 10 * * ?</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kogito"><a class="anchor" href="#_kogito"></a><a class="link" href="#_kogito">Kogito</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="http://www.kiegroup.org/" target="_blank" rel="noopener">Kogito</a>, a next-generation business automation toolkit from Drools and jBPM projects for adding business automation capabilities.</p>
<p class="">To start using it you only need to add the next extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kogito"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_apache_tika"><a class="anchor" href="#_apache_tika"></a><a class="link" href="#_apache_tika">Apache Tika</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrets with <a href="https://tika.apache.org/" target="_blank" rel="noopener">Apache Tika</a> to detect and extract metadata/text from different file types:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-tika"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
io.quarkus.tika.TikaParser parser;

@POST
@Path("/text")
@Consumes({ "text/plain", "application/pdf",
            "application/vnd.oasis.opendocument.text" })
@Produces(MediaType.TEXT_PLAIN)
public String extractText(InputStream stream) {
    return parser.parse(stream).getText();
}</code></pre>
</div>
</div>
<p class="">You can configure Apache Tika in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tika.tika-config-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tika-config.xml</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Path to the Tika configuration resource.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.tika.parsers</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">CSV of the abbreviated or full parser class to be loaded by the extension.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tika.append-embedded-content</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The document may have other embedded documents. Set if autmatically append.</p></div></td>
</tr>
</tbody>
</table>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_jgit"><a class="anchor" href="#_jgit"></a><a class="link" href="#_jgit">JGit</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrets with <a href="https://www.eclipse.org/jgit/" target="_blank" rel="noopener">JGit</a> to integrate with Git repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jgit"</code></pre>
</div>
</div>
<p class="">And then you can start using JGit:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">try (Git git = Git.cloneRepository()
                  .setDirectory(tmpDir)
                  .setURI(url)
                  .call()) {
    return tmpDir.toString();
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
When running in native mode, make sure to configure SSL access correctly <code>quarkus.ssl.native=true</code> (<a href="https://quarkus.io/guides/native-and-ssl-guide" target="_blank" rel="noopener">Native and SSL</a>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_resources"><a class="anchor" href="#_web_resources"></a><a class="link" href="#_web_resources">Web Resources</a></h2>
<div class="sectionbody">
<p class="">You can serve web resources with Quarkus.
You need to place web resources at <code>src/main/resources/META-INF/resources</code> and then they are accessible (ie <a href="http://localhost:8080/index.html" class="bare">http://localhost:8080/index.html</a>)</p>
<p class="">By default static resources as served under the root context.
You can change this by using <code>quarkus.http.root-path</code> property.</p>
</div>
</div>
<div class="sect1">
<h2 id="_transactional_memory"><a class="anchor" href="#_transactional_memory"></a><a class="link" href="#_transactional_memory">Transactional Memory</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with the Software Transactional Memory (STM) implementation provided by the <a href="https://narayana.io/docs/project/index.html">Narayana</a> project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="narayana-stm"</code></pre>
</div>
</div>
<p class="">Transactional objects must be interfaces and annotated with <code>org.jboss.stm.annotations.Transactional</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@NestedTopLevel
public interface FlightService {
    int getNumberOfBookings();
    void makeBooking(String details);
}</code></pre>
</div>
</div>
<p class="">The pessimistic strategy is the default one, you can change to optimistic by using <code>@Optimistic</code>.</p>
<p class="">Then you need to create the object inside <code>org.jboss.stm.Container</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Container&lt;FlightService&gt; container = new Container&lt;&gt;();
FlightServiceImpl instance = new FlightServiceImpl();
FlightService flightServiceProxy = container.create(instance);</code></pre>
</div>
</div>
<p class="">The implementation of the service sets the locking and what needs to be saved/restored:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.jboss.stm.annotations.ReadLock;
import org.jboss.stm.annotations.State;
import org.jboss.stm.annotations.WriteLock;

public class FlightServiceImpl
    implements FlightService {
    @State
    private int numberOfBookings;

    @ReadLock
    public int getNumberOfBookings() {
        return numberOfBookings;
    }

    @WriteLock
    public void makeBooking(String details) {
        numberOfBookings += 1;
    }
}</code></pre>
</div>
</div>
<p class="">Any member is saved/restored automatically (<code>@State</code> is not mandatory).
You can use <code>@NotState</code> to avoid behaviour.</p>
<p class=""><strong>Transaction boundaries</strong></p>
<p class=""><em>Declarative</em></p>
<div class="ulist">
<ul>
<li>
<p><code>@NestedTopLevel</code>: Defines that the container will create a new top-level transaction for each method invocation.</p>
</li>
<li>
<p><code>@Nested</code>: Defines that the container will create a new top-level or nested transaction for each method invocation.</p>
</li>
</ul>
</div>
<p class=""><em>Programmatically</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">AtomicAction aa = new AtomicAction();

aa.begin();
{
    try {
        flightService.makeBooking("BA123 ...");
        taxiService.makeBooking("East Coast Taxis ...");

        aa.commit();
    } catch (Exception e) {
        aa.abort();
    }
}</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_di"><a class="anchor" href="#_spring_di"></a><a class="link" href="#_spring_di">Spring DI</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring dependency injection.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-di"</code></pre>
</div>
</div>
<p class="">Some examples of what you can do.
Notice that annotations are the Spring original ones.</p>
<div class="listingblock">
<div class="content">
<pre>@Configuration
public class AppConfiguration {

    @Bean(name = "capitalizeFunction")
    public StringFunction capitalizer() {
        return String::toUpperCase;
    }
}</pre>
</div>
</div>
<p class="">Or as a component:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component("noopFunction")
public class NoOpSingleStringFunction
    implements StringFunction {
}</code></pre>
</div>
</div>
<p class="">Also as a service and injection properties from <code>application.properties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Service
public class MessageProducer {

    @Value("${greeting.message}")
    String message;

}</code></pre>
</div>
</div>
<p class="">And you can inject using <code>Autowired</code> or constructor in a component and in a JAX-RS resource too.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class GreeterBean {

    private final MessageProducer messageProducer;

    @Autowired @Qualifier("noopFunction")
    StringFunction noopStringFunction;

    public GreeterBean(MessageProducer messageProducer) {
        this.messageProducer = messageProducer;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_web"><a class="anchor" href="#_spring_web"></a><a class="link" href="#_spring_web">Spring Web</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring Web.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-web"</code></pre>
</div>
</div>
<p class="">Specifically supports the REST related features.
Notice that infrastructure things like <code>BeanPostProcessor</code> will not be executed.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestController
@RequestMapping("/greeting")
public class GreetingController {

    private final GreetingBean greetingBean;

    public GreetingController(GreetingBean greetingBean) {
        this.greetingBean = greetingBean;
    }

    @GetMapping("/{name}")
    public Greeting hello(@PathVariable(name = "name")
                            String name) {
        return new Greeting(greetingBean.greet(name));
    }
}</code></pre>
</div>
</div>
<p class="">Supported annotations are: <code>RestController</code>, <code>RequestMapping</code>, <code>GetMapping</code>, <code>PostMapping</code>, <code>PutMapping</code>, <code>DeleteMapping</code>, <code>PatchMapping</code>, <code>RequestParam</code>, <code>RequestHeader</code>, <code>MatrixVariable</code>, <code>PathVariable</code>, <code>CookieValue</code>, <code>RequestBody</code>, <code>ResponseStatus</code>, <code>ExceptionHandler</code> and <code>RestControllerAdvice</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If you scaffold the project with <code>spring-web</code> extension, then Spring Web annotations are sed in the generated project. <code>mvn io.quarkus:quarkus-maven-plugin:0.26.1:create &#8230;&#8203; -Dextensions="spring-web"</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_data_jpa"><a class="anchor" href="#_spring_data_jpa"></a><a class="link" href="#_spring_data_jpa">Spring Data JPA</a></h2>
<div class="sectionbody">
<p class="">While users are encouraged to use Hibernate ORM with Panache for Relational Database access, Quarkus provides a compatibility layer for <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/" target="_blank" rel="noopener">Spring Data JPA</a> repositories.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-data-jpa"</code></pre>
</div>
</div>
<p class="">INFO: Of course you still need to add the JDBC driver, and configure it in <code>application.properties</code>.</p>
<div class="page-break"></div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface FruitRepository
        extends CrudRepository&lt;Fruit, Long&gt; {
    List&lt;Fruit&gt; findByColor(String color);
}</code></pre>
</div>
</div>
<p class="">And then you can inject it either as shown in <a href="#_spring_di">Spring DI</a> or in <a href="#_spring_web">Spring Web</a>.</p>
<p class="">Interfaces supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>org.springframework.data.repository.Repository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.PagingAndSortingRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.jpa.repository.JpaRepository</code>.</p>
</li>
</ul>
</div>
<p class="">INFO: Generated repositories are automatically annotated with <code>@Transactional</code>.</p>
<p class="">Repository fragments is also supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface PersonRepository
    extends JpaRepository&lt;Person, Long&gt;, PersonFragment {

    void makeNameUpperCase(Person person);
}</code></pre>
</div>
</div>
<p class="">User defined queries:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Query("select m from Movie m where m.rating = ?1")
Iterator&lt;Movie&gt; findByRating(String rating);

@Modifying
@Query("delete from Movie where rating = :rating")
void deleteByRating(@Param("rating") String rating);</code></pre>
</div>
</div>
<p class="">What is currently unsupported:</p>
<div class="ulist">
<ul>
<li>
<p>Methods of <code>org.springframework.data.repository.query.QueryByExampleExecutor</code></p>
</li>
<li>
<p>QueryDSL support</p>
</li>
<li>
<p>Customizing the base repository</p>
</li>
<li>
<p><code>java.util.concurrent.Future</code> as return type</p>
</li>
<li>
<p>Native and named queries when using <code>@Query</code></p>
</li>
</ul>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a><a class="link" href="#_resources">Resources</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://quarkus.io/guides/" class="bare">https://quarkus.io/guides/</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/user/lordofthejars" class="bare">https://www.youtube.com/user/lordofthejars</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1 authors">
<h3>Authors :</h3>
<div class="author">
<div class="author-avatar"><img src="http://avatars.io/twitter/alexsotob"/></div>
<div class="author-name"><a href="https://twitter.com/alexsotob">@alexsotob</a></div>
<div class="author-bio">Java Champion and Director of DevExp at Red Hat</div>
</div>

<div class="author-bio">0.26.1</div>
<img src="./redhat/assets/by-nc-sa.png"/>
</div>

</section>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>